
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Frequenz Python SDK.">
      
      
        <meta name="author" content="Frequenz Energy-as-a-Service GmbH">
      
      
      
        <link rel="prev" href="../power/">
      
      
        <link rel="next" href="battery_pool/">
      
      <link rel="icon" href="../../../../logo.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>timeseries - Frequenz Python SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../css/style.css">
    
      <link rel="stylesheet" href="../../../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frequenz.sdk.timeseries" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest (stable) version.
  <a href="../../../../.."> 
    <strong>Click here to go to latest (stable) version</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Frequenz Python SDK" class="md-header__button md-logo" aria-label="Frequenz Python SDK" data-md-component="logo">
      
  <img src="../../../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Frequenz Python SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              timeseries
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/frequenz-floss/frequenz-sdk-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    frequenz-sdk-python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../conftest/" class="md-tabs__link md-tabs__link--active">
        API Reference
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../CONTRIBUTING/" class="md-tabs__link">
      Development
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Frequenz Python SDK" class="md-nav__button md-logo" aria-label="Frequenz Python SDK" data-md-component="logo">
      
  <img src="../../../../logo.png" alt="logo">

    </a>
    Frequenz Python SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/frequenz-floss/frequenz-sdk-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    frequenz-sdk-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../conftest/" class="md-nav__link">
        conftest
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          frequenz
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          frequenz
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">sdk</a>
          
            <label for="__nav_2_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          sdk
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../actor/">actor</a>
          
            <label for="__nav_2_2_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          actor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_1_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../actor/power_distributing/">power_distributing</a>
          
            <label for="__nav_2_2_1_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_2_1_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          power_distributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../actor/power_distributing/power_distributing/" class="md-nav__link">
        power_distributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../actor/power_distributing/request/" class="md-nav__link">
        request
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../actor/power_distributing/result/" class="md-nav__link">
        result
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../microgrid/">microgrid</a>
          
            <label for="__nav_2_2_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          microgrid
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microgrid/client/" class="md-nav__link">
        client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microgrid/component/" class="md-nav__link">
        component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../microgrid/connection_manager/" class="md-nav__link">
        connection_manager
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power/" class="md-nav__link">
        power
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_5" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index md-nav__link--active">
          <a href="./">timeseries</a>
          
            <label for="__nav_2_2_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          timeseries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_5_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="battery_pool/">battery_pool</a>
          
            <label for="__nav_2_2_1_5_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_2_1_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1_5_1">
          <span class="md-nav__icon md-icon"></span>
          battery_pool
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="battery_pool/battery_pool/" class="md-nav__link">
        battery_pool
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ev_charger_pool/" class="md-nav__link">
        ev_charger_pool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="logical_meter/" class="md-nav__link">
        logical_meter
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../CONTRIBUTING/" class="md-nav__link">
        Development
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries" class="md-nav__link">
    timeseries
  </a>
  
    <nav class="md-nav" aria-label="timeseries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries--periodicity-and-alignment" class="md-nav__link">
    Periodicity and alignment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.UNIX_EPOCH" class="md-nav__link">
    UNIX_EPOCH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.MovingWindow" class="md-nav__link">
    MovingWindow
  </a>
  
    <nav class="md-nav" aria-label="MovingWindow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.MovingWindow-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.__getitem__" class="md-nav__link">
    __getitem__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.ResamplerConfig" class="md-nav__link">
    ResamplerConfig
  </a>
  
    <nav class="md-nav" aria-label="ResamplerConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.ResamplerConfig-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.align_to" class="md-nav__link">
    align_to
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.initial_buffer_len" class="md-nav__link">
    initial_buffer_len
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.max_buffer_len" class="md-nav__link">
    max_buffer_len
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.max_data_age_in_periods" class="md-nav__link">
    max_data_age_in_periods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.resampling_function" class="md-nav__link">
    resampling_function
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.resampling_period" class="md-nav__link">
    resampling_period
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.warn_buffer_len" class="md-nav__link">
    warn_buffer_len
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.ResamplerConfig-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.__post_init__" class="md-nav__link">
    __post_init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.Sample" class="md-nav__link">
    Sample
  </a>
  
    <nav class="md-nav" aria-label="Sample">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.Sample-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample.timestamp" class="md-nav__link">
    timestamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample.value" class="md-nav__link">
    value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.Sample3Phase" class="md-nav__link">
    Sample3Phase
  </a>
  
    <nav class="md-nav" aria-label="Sample3Phase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.Sample3Phase-attributes" class="md-nav__link">
    Attributes
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.timestamp" class="md-nav__link">
    timestamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.value_p1" class="md-nav__link">
    value_p1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.value_p2" class="md-nav__link">
    value_p2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.value_p3" class="md-nav__link">
    value_p3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries.Sample3Phase-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.map" class="md-nav__link">
    map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.max" class="md-nav__link">
    max()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.min" class="md-nav__link">
    min()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>timeseries</h1>

<div class="doc doc-object doc-module">



<h2 id="frequenz.sdk.timeseries" class="doc doc-heading">
          <code>frequenz.sdk.timeseries</code>


<a href="#frequenz.sdk.timeseries" class="headerlink" title="Permanent link">¤</a></h2>

  <div class="doc doc-contents first">
  
      <p>Handling of timeseries streams.</p>
<p>A timeseries is a stream (normally an async iterator) of
<a class="autorefs autorefs-internal" href="#frequenz.sdk.timeseries.Sample"><code>Sample</code></a>s.</p>
<h3 id="frequenz.sdk.timeseries--periodicity-and-alignment">Periodicity and alignment<a class="headerlink" href="#frequenz.sdk.timeseries--periodicity-and-alignment" title="Permanent link">¤</a></h3>
<p>All the data produced by this package is always periodic and aligned to the
<code>UNIX_EPOCH</code> (by default).</p>
<p>Classes normally take a (re)sampling period as and argument and, optionally, an
<code>align_to</code> argument.</p>
<p>This means timestamps are always separated exaclty by a period, and that this
timestamp falls always at multiples of the period, starting at the <code>align_to</code>.</p>
<p>This ensures that the data is predictable and consistent among restarts.</p>

<details class="example" open>
  <summary>Example</summary>
  <p>If we have a period of 10 seconds, and are aligning to the UNIX
epoch. Assuming the following timeline starts in 1970-01-01 00:00:00
UTC and our current <code>now</code> is 1970-01-01 00:00:32 UTC, then the next
timestamp will be at 1970-01-01 00:00:40 UTC:</p>
<div class="highlight"><pre><span></span><code>align_to = 1970-01-01 00:00:00         next event = 1970-01-01 00:00:40
|                                       |
|---------|---------|---------|-|-------|---------|---------|---------|
0        10        20        30 |      40        50        60        70
                               now = 1970-01-01 00:00:32
</code></pre></div>
</details>
  

  <div class="doc doc-children">





<h3 id="frequenz.sdk.timeseries-attributes">Attributes<a href="#frequenz.sdk.timeseries-attributes" class="headerlink" title="Permanent link">¤</a></h3>

<div class="doc doc-object doc-attribute">



<h4 id="frequenz.sdk.timeseries.UNIX_EPOCH" class="doc doc-heading">
<code class="highlight language-python"><span class="n">frequenz</span><span class="o">.</span><span class="n">sdk</span><span class="o">.</span><span class="n">timeseries</span><span class="o">.</span><span class="n">UNIX_EPOCH</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries.UNIX_EPOCH" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
  
      <p>The UNIX epoch (in UTC).</p>
  </div>

</div>
<h3 id="frequenz.sdk.timeseries-classes">Classes<a href="#frequenz.sdk.timeseries-classes" class="headerlink" title="Permanent link">¤</a></h3>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.timeseries.MovingWindow" class="doc doc-heading">
        <code>frequenz.sdk.timeseries.MovingWindow</code>


<a href="#frequenz.sdk.timeseries.MovingWindow" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">

  
      <p>A data window that moves with the latest datapoints of a data stream.</p>
<p>After initialization the <code>MovingWindow</code> can be accessed by an integer
index or a timestamp. A sub window can be accessed by using a slice of
integers or timestamps.</p>
<p>Note that a numpy ndarray is returned and thus users can use
numpys operations directly on a window.</p>
<p>The window uses a ring buffer for storage and the first element is aligned to
a fixed defined point in time. Since the moving nature of the window, the
date of the first and the last element are constantly changing and therefore
the point in time that defines the alignment can be outside of the time window.
Modulo arithmetic is used to move the <code>align_to</code> timestamp into the latest
window.</p>
<p>If for example the <code>align_to</code> parameter is set to
<code>datetime(1, 1, 1, tzinfo=timezone.utc)</code> and the window size is bigger than
one day then the first element will always be aligned to midnight.</p>
<p>Resampling might be required to reduce the number of samples to store, and
it can be set by specifying the resampler config parameter so that the user
can control the granularity of the samples to be stored in the underlying
buffer.</p>
<p>If resampling is not required, the resampler config parameter can be
set to None in which case the MovingWindow will not perform any resampling.</p>

<details class="example" open>
  <summary>Calculate the mean of a time interval</summary>
  <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">,</span> <span class="n">timezone</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">send_mock_data</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">Sender</span><span class="p">[</span><span class="n">Sample</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Sample</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span> <span class="mf">10.0</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">resampled_data_channel</span> <span class="o">=</span> <span class="n">Broadcast</span><span class="p">[</span><span class="n">Sample</span><span class="p">](</span><span class="s2">&quot;sample-data&quot;</span><span class="p">)</span>
    <span class="n">resampled_data_receiver</span> <span class="o">=</span> <span class="n">resampled_data_channel</span><span class="o">.</span><span class="n">new_receiver</span><span class="p">()</span>
    <span class="n">resampled_data_sender</span> <span class="o">=</span> <span class="n">resampled_data_channel</span><span class="o">.</span><span class="n">new_sender</span><span class="p">()</span>

    <span class="n">send_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">send_mock_data</span><span class="p">(</span><span class="n">resampled_data_sender</span><span class="p">))</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">MovingWindow</span><span class="p">(</span>
        <span class="n">size</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
        <span class="n">resampled_data_recv</span><span class="o">=</span><span class="n">resampled_data_receiver</span><span class="p">,</span>
        <span class="n">input_sampling_period</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">time_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
    <span class="n">time_end</span> <span class="o">=</span> <span class="n">time_start</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="c1"># ... wait for 5 minutes until the buffer is filled</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="c1"># return an numpy array from the window</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">window</span><span class="p">[</span><span class="n">time_start</span><span class="p">:</span><span class="n">time_end</span><span class="p">]</span>
    <span class="c1"># and use it to for example calculate the mean</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
</code></pre></div>
</details>
<details class="example" open>
  <summary>Create a polars data frame from a <code>MovingWindow</code></summary>
  <div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">polars</span> <span class="k">as</span> <span class="nn">pl</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">,</span> <span class="n">timezone</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">send_mock_data</span><span class="p">(</span><span class="n">sender</span><span class="p">:</span> <span class="n">Sender</span><span class="p">[</span><span class="n">Sample</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Sample</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span> <span class="mf">10.0</span><span class="p">))</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">resampled_data_channel</span> <span class="o">=</span> <span class="n">Broadcast</span><span class="p">[</span><span class="n">Sample</span><span class="p">](</span><span class="s2">&quot;sample-data&quot;</span><span class="p">)</span>
    <span class="n">resampled_data_receiver</span> <span class="o">=</span> <span class="n">resampled_data_channel</span><span class="o">.</span><span class="n">new_receiver</span><span class="p">()</span>
    <span class="n">resampled_data_sender</span> <span class="o">=</span> <span class="n">resampled_data_channel</span><span class="o">.</span><span class="n">new_sender</span><span class="p">()</span>

    <span class="n">send_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">send_mock_data</span><span class="p">(</span><span class="n">resampled_data_sender</span><span class="p">))</span>

    <span class="c1"># create a window that stores two days of data</span>
    <span class="c1"># starting at 1.1.23 with samplerate=1</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">MovingWindow</span><span class="p">(</span>
        <span class="n">size</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">resampled_data_recv</span><span class="o">=</span><span class="n">resampled_data_receiver</span><span class="p">,</span>
        <span class="n">input_sampling_period</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># wait for one full day until the buffer is filled</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="p">)</span>

    <span class="c1"># create a polars series with one full day of data</span>
    <span class="n">time_start</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
    <span class="n">time_end</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
    <span class="n">series</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s2">&quot;Jan_1&quot;</span><span class="p">,</span> <span class="n">window</span><span class="p">[</span><span class="n">time_start</span><span class="p">:</span><span class="n">time_end</span><span class="p">])</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
</code></pre></div>
</details>

        <details class="quote">
          <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_moving_window.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MovingWindow</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A data window that moves with the latest datapoints of a data stream.</span>

<span class="sd">    After initialization the `MovingWindow` can be accessed by an integer</span>
<span class="sd">    index or a timestamp. A sub window can be accessed by using a slice of</span>
<span class="sd">    integers or timestamps.</span>

<span class="sd">    Note that a numpy ndarray is returned and thus users can use</span>
<span class="sd">    numpys operations directly on a window.</span>

<span class="sd">    The window uses a ring buffer for storage and the first element is aligned to</span>
<span class="sd">    a fixed defined point in time. Since the moving nature of the window, the</span>
<span class="sd">    date of the first and the last element are constantly changing and therefore</span>
<span class="sd">    the point in time that defines the alignment can be outside of the time window.</span>
<span class="sd">    Modulo arithmetic is used to move the `align_to` timestamp into the latest</span>
<span class="sd">    window.</span>

<span class="sd">    If for example the `align_to` parameter is set to</span>
<span class="sd">    `datetime(1, 1, 1, tzinfo=timezone.utc)` and the window size is bigger than</span>
<span class="sd">    one day then the first element will always be aligned to midnight.</span>

<span class="sd">    Resampling might be required to reduce the number of samples to store, and</span>
<span class="sd">    it can be set by specifying the resampler config parameter so that the user</span>
<span class="sd">    can control the granularity of the samples to be stored in the underlying</span>
<span class="sd">    buffer.</span>

<span class="sd">    If resampling is not required, the resampler config parameter can be</span>
<span class="sd">    set to None in which case the MovingWindow will not perform any resampling.</span>

<span class="sd">    Example: Calculate the mean of a time interval</span>

<span class="sd">        ```python</span>
<span class="sd">        from datetime import datetime, timedelta, timezone</span>

<span class="sd">        async def send_mock_data(sender: Sender[Sample]) -&gt; None:</span>
<span class="sd">            while True:</span>
<span class="sd">                await sender.send(Sample(datetime.now(tz=timezone.utc), 10.0))</span>
<span class="sd">                await asyncio.sleep(1.0)</span>

<span class="sd">        async def run() -&gt; None:</span>
<span class="sd">            resampled_data_channel = Broadcast[Sample](&quot;sample-data&quot;)</span>
<span class="sd">            resampled_data_receiver = resampled_data_channel.new_receiver()</span>
<span class="sd">            resampled_data_sender = resampled_data_channel.new_sender()</span>

<span class="sd">            send_task = asyncio.create_task(send_mock_data(resampled_data_sender))</span>

<span class="sd">            window = MovingWindow(</span>
<span class="sd">                size=timedelta(minutes=5),</span>
<span class="sd">                resampled_data_recv=resampled_data_receiver,</span>
<span class="sd">                input_sampling_period=timedelta(seconds=1),</span>
<span class="sd">            )</span>

<span class="sd">            time_start = datetime.now(tz=timezone.utc)</span>
<span class="sd">            time_end = time_start + timedelta(minutes=5)</span>

<span class="sd">            # ... wait for 5 minutes until the buffer is filled</span>
<span class="sd">            await asyncio.sleep(5)</span>

<span class="sd">            # return an numpy array from the window</span>
<span class="sd">            array = window[time_start:time_end]</span>
<span class="sd">            # and use it to for example calculate the mean</span>
<span class="sd">            mean = array.mean()</span>

<span class="sd">        asyncio.run(run())</span>
<span class="sd">        ```</span>

<span class="sd">    Example: Create a polars data frame from a `MovingWindow`</span>

<span class="sd">        ```python</span>
<span class="sd">        import polars as pl</span>
<span class="sd">        from datetime import datetime, timedelta, timezone</span>

<span class="sd">        async def send_mock_data(sender: Sender[Sample]) -&gt; None:</span>
<span class="sd">            while True:</span>
<span class="sd">                await sender.send(Sample(datetime.now(tz=timezone.utc), 10.0))</span>
<span class="sd">                await asyncio.sleep(1.0)</span>

<span class="sd">        async def run() -&gt; None:</span>
<span class="sd">            resampled_data_channel = Broadcast[Sample](&quot;sample-data&quot;)</span>
<span class="sd">            resampled_data_receiver = resampled_data_channel.new_receiver()</span>
<span class="sd">            resampled_data_sender = resampled_data_channel.new_sender()</span>

<span class="sd">            send_task = asyncio.create_task(send_mock_data(resampled_data_sender))</span>

<span class="sd">            # create a window that stores two days of data</span>
<span class="sd">            # starting at 1.1.23 with samplerate=1</span>
<span class="sd">            window = MovingWindow(</span>
<span class="sd">                size=timedelta(days=2),</span>
<span class="sd">                resampled_data_recv=resampled_data_receiver,</span>
<span class="sd">                input_sampling_period=timedelta(seconds=1),</span>
<span class="sd">            )</span>

<span class="sd">            # wait for one full day until the buffer is filled</span>
<span class="sd">            asyncio.sleep(60*60*24)</span>

<span class="sd">            # create a polars series with one full day of data</span>
<span class="sd">            time_start = datetime(2023, 1, 1, tzinfo=timezone.utc)</span>
<span class="sd">            time_end = datetime(2023, 1, 2, tzinfo=timezone.utc)</span>
<span class="sd">            series = pl.Series(&quot;Jan_1&quot;, window[time_start:time_end])</span>

<span class="sd">        asyncio.run(run())</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">size</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">,</span>
        <span class="n">resampled_data_recv</span><span class="p">:</span> <span class="n">Receiver</span><span class="p">[</span><span class="n">Sample</span><span class="p">],</span>
        <span class="n">input_sampling_period</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">,</span>
        <span class="n">resampler_config</span><span class="p">:</span> <span class="n">ResamplerConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">align_to</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">UNIX_EPOCH</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the MovingWindow.</span>

<span class="sd">        This method creates the underlying ring buffer and starts a</span>
<span class="sd">        new task that updates the ring buffer with new incoming samples.</span>
<span class="sd">        The task stops running only if the channel receiver is closed.</span>

<span class="sd">        Args:</span>
<span class="sd">            size: The time span of the moving window over which samples will be stored.</span>
<span class="sd">            resampled_data_recv: A receiver that delivers samples with a</span>
<span class="sd">                given sampling period.</span>
<span class="sd">            input_sampling_period: The time interval between consecutive input samples.</span>
<span class="sd">            resampler_config: The resampler configuration in case resampling is required.</span>
<span class="sd">            align_to: A datetime object that defines a point in time to which</span>
<span class="sd">                the window is aligned to modulo window size. For further</span>
<span class="sd">                information, consult the class level documentation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            asyncio.CancelledError: when the task gets cancelled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">input_sampling_period</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">),</span> <span class="s2">&quot;The input sampling period should be greater than zero.&quot;</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">input_sampling_period</span> <span class="o">&lt;=</span> <span class="n">size</span>
        <span class="p">),</span> <span class="s2">&quot;The input sampling period should be equal to or lower than the window size.&quot;</span>

        <span class="n">sampling</span> <span class="o">=</span> <span class="n">input_sampling_period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span><span class="p">:</span> <span class="n">Resampler</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_sender</span><span class="p">:</span> <span class="n">Sender</span><span class="p">[</span><span class="n">Sample</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">resampler_config</span><span class="p">:</span>
            <span class="k">assert</span> <span class="p">(</span>
                <span class="n">resampler_config</span><span class="o">.</span><span class="n">resampling_period</span> <span class="o">&lt;=</span> <span class="n">size</span>
            <span class="p">),</span> <span class="s2">&quot;The resampling period should be equal to or lower than the window size.&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span> <span class="o">=</span> <span class="n">Resampler</span><span class="p">(</span><span class="n">resampler_config</span><span class="p">)</span>
            <span class="n">sampling</span> <span class="o">=</span> <span class="n">resampler_config</span><span class="o">.</span><span class="n">resampling_period</span>

        <span class="c1"># Sampling period might not fit perfectly into the window size.</span>
        <span class="n">num_samples</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="n">sampling</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_resampled_data_recv</span> <span class="o">=</span> <span class="n">resampled_data_recv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span> <span class="o">=</span> <span class="n">OrderedRingBuffer</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="n">sampling_period</span><span class="o">=</span><span class="n">sampling</span><span class="p">,</span>
            <span class="n">align_to</span><span class="o">=</span><span class="n">align_to</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_configure_resampler</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_window_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_run_impl</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_run_impl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Awaits samples from the receiver and updates the underlying ring buffer.</span>

<span class="sd">        Raises:</span>
<span class="sd">            asyncio.CancelledError: if the MovingWindow task is cancelled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampled_data_recv</span><span class="p">:</span>
                <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Received new sample: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_sender</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;MovingWindow task has been cancelled.&quot;</span><span class="p">)</span>
            <span class="k">raise</span>

        <span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Channel has been closed&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cancel the running tasks and stop the MovingWindow.&quot;&quot;&quot;</span>
        <span class="k">await</span> <span class="n">cancel_and_await</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_window_task</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">cancel_and_await</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_configure_resampler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure the components needed to run the resampler.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">async</span> <span class="k">def</span> <span class="nf">sink_buffer</span><span class="p">(</span><span class="n">sample</span><span class="p">:</span> <span class="n">Sample</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sample</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

        <span class="n">resampler_channel</span> <span class="o">=</span> <span class="n">Broadcast</span><span class="p">[</span><span class="n">Sample</span><span class="p">](</span><span class="s2">&quot;average&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_sender</span> <span class="o">=</span> <span class="n">resampler_channel</span><span class="o">.</span><span class="n">new_sender</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span><span class="o">.</span><span class="n">add_timeseries</span><span class="p">(</span>
            <span class="s2">&quot;avg&quot;</span><span class="p">,</span> <span class="n">resampler_channel</span><span class="o">.</span><span class="n">new_receiver</span><span class="p">(),</span> <span class="n">sink_buffer</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span><span class="o">.</span><span class="n">resample</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the size of the `MovingWindow`s underlying buffer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The size of the `MovingWindow`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">SupportsIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See the main __getitem__ method.</span>

<span class="sd">        # noqa: DAR101 key</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See the main __getitem__ method.</span>

<span class="sd">        # noqa: DAR101 key</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">slice</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ArrayLike</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See the main __getitem__ method.</span>

<span class="sd">        # noqa: DAR101 key</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">SupportsIndex</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">ArrayLike</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a sub window of the `MovingWindow`.</span>

<span class="sd">        The `MovingWindow` is accessed either by timestamp or by index</span>
<span class="sd">        or by a slice of timestamps or integers.</span>

<span class="sd">        * If the key is an integer, the float value of that key</span>
<span class="sd">          at the given position is returned.</span>
<span class="sd">        * If the key is a datetime object, the float value of that key</span>
<span class="sd">          that corresponds to the timestamp is returned.</span>
<span class="sd">        * If the key is a slice of timestamps or integers, an ndarray is returned,</span>
<span class="sd">          where the bounds correspond to the slice bounds.</span>
<span class="sd">          Note that a half open interval, which is open at the end, is returned.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: Either an integer or a timestamp or a slice of timestamps or integers.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IndexError: when requesting an out of range timestamp or index</span>
<span class="sd">            TypeError: when the key is not a datetime or slice object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A float if the key is a number or a timestamp.</span>
<span class="sd">            an numpy array if the key is a slice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Returning slice for [</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">].&quot;</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
            <span class="c1"># we are doing runtime typechecks since there is no abstract slice type yet</span>
            <span class="c1"># see also (https://peps.python.org/pep-0696)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">datetime</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Returning value at time </span><span class="si">%s</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">datetime_to_index</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">SupportsIndex</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s2">&quot;Key has to be either a timestamp or an integer &quot;</span>
            <span class="s2">&quot;or a slice of timestamps or integers&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<h5 id="frequenz.sdk.timeseries.MovingWindow-functions">Functions<a href="#frequenz.sdk.timeseries.MovingWindow-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._moving_window.MovingWindow.__getitem__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.__getitem__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Return a sub window of the <code>MovingWindow</code>.</p>
<p>The <code>MovingWindow</code> is accessed either by timestamp or by index
or by a slice of timestamps or integers.</p>
<ul>
<li>If the key is an integer, the float value of that key
  at the given position is returned.</li>
<li>If the key is a datetime object, the float value of that key
  that corresponds to the timestamp is returned.</li>
<li>If the key is a slice of timestamps or integers, an ndarray is returned,
  where the bounds correspond to the slice bounds.
  Note that a half open interval, which is open at the end, is returned.</li>
</ul>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>key</code></td>
          <td class="doc-param-details">
            <p>Either an integer or a timestamp or a slice of timestamps or integers.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.SupportsIndex" href="https://docs.python.org/3/library/typing.html#typing.SupportsIndex">SupportsIndex</a> | <a class="autorefs autorefs-external" title="datetime.datetime" href="https://docs.python.org/3/library/datetime.html#datetime.datetime">datetime</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#slice">slice</a></code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#IndexError">IndexError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>when requesting an out of range timestamp or index</p>
          </td>
        </tr>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#TypeError">TypeError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>when the key is not a datetime or slice object.</p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | <span title="numpy.typing.ArrayLike">ArrayLike</span></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>A float if the key is a number or a timestamp.</p>
          </td>
        </tr>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | <span title="numpy.typing.ArrayLike">ArrayLike</span></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>an numpy array if the key is a slice.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_moving_window.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">SupportsIndex</span> <span class="o">|</span> <span class="n">datetime</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">ArrayLike</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a sub window of the `MovingWindow`.</span>

<span class="sd">    The `MovingWindow` is accessed either by timestamp or by index</span>
<span class="sd">    or by a slice of timestamps or integers.</span>

<span class="sd">    * If the key is an integer, the float value of that key</span>
<span class="sd">      at the given position is returned.</span>
<span class="sd">    * If the key is a datetime object, the float value of that key</span>
<span class="sd">      that corresponds to the timestamp is returned.</span>
<span class="sd">    * If the key is a slice of timestamps or integers, an ndarray is returned,</span>
<span class="sd">      where the bounds correspond to the slice bounds.</span>
<span class="sd">      Note that a half open interval, which is open at the end, is returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: Either an integer or a timestamp or a slice of timestamps or integers.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IndexError: when requesting an out of range timestamp or index</span>
<span class="sd">        TypeError: when the key is not a datetime or slice object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A float if the key is a number or a timestamp.</span>
<span class="sd">        an numpy array if the key is a slice.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Returning slice for [</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">].&quot;</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
        <span class="c1"># we are doing runtime typechecks since there is no abstract slice type yet</span>
        <span class="c1"># see also (https://peps.python.org/pep-0696)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">datetime</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">window</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Returning value at time </span><span class="si">%s</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="o">.</span><span class="n">datetime_to_index</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">SupportsIndex</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
        <span class="s2">&quot;Key has to be either a timestamp or an integer &quot;</span>
        <span class="s2">&quot;or a slice of timestamps or integers&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._moving_window.MovingWindow.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">resampled_data_recv</span><span class="p">,</span> <span class="n">input_sampling_period</span><span class="p">,</span> <span class="n">resampler_config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">align_to</span><span class="o">=</span><span class="n">UNIX_EPOCH</span><span class="p">)</span></code>

<a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.__init__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Initialize the MovingWindow.</p>
<p>This method creates the underlying ring buffer and starts a
new task that updates the ring buffer with new incoming samples.
The task stops running only if the channel receiver is closed.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>size</code></td>
          <td class="doc-param-details">
            <p>The time span of the moving window over which samples will be stored.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.timedelta" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta">timedelta</a></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>resampled_data_recv</code></td>
          <td class="doc-param-details">
            <p>A receiver that delivers samples with a
given sampling period.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="frequenz.channels.Receiver">Receiver</span>[<a class="autorefs autorefs-internal" title="frequenz.sdk.timeseries._base_types.Sample" href="#frequenz.sdk.timeseries.Sample">Sample</a>]</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>input_sampling_period</code></td>
          <td class="doc-param-details">
            <p>The time interval between consecutive input samples.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.timedelta" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta">timedelta</a></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>resampler_config</code></td>
          <td class="doc-param-details">
            <p>The resampler configuration in case resampling is required.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-internal" title="frequenz.sdk.timeseries._resampling.ResamplerConfig" href="../actor/#frequenz.sdk.actor.ResamplerConfig">ResamplerConfig</a> | None</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>align_to</code></td>
          <td class="doc-param-details">
            <p>A datetime object that defines a point in time to which
the window is aligned to modulo window size. For further
information, consult the class level documentation.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.datetime" href="https://docs.python.org/3/library/datetime.html#datetime.datetime">datetime</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>UNIX_EPOCH</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio">asyncio</a>.<a class="autorefs autorefs-external" title="asyncio.CancelledError" href="https://docs.python.org/3/library/asyncio-exceptions.html#asyncio.CancelledError">CancelledError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>when the task gets cancelled.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_moving_window.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>  <span class="c1"># pylint: disable=too-many-arguments</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">size</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">,</span>
    <span class="n">resampled_data_recv</span><span class="p">:</span> <span class="n">Receiver</span><span class="p">[</span><span class="n">Sample</span><span class="p">],</span>
    <span class="n">input_sampling_period</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">,</span>
    <span class="n">resampler_config</span><span class="p">:</span> <span class="n">ResamplerConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">align_to</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">UNIX_EPOCH</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the MovingWindow.</span>

<span class="sd">    This method creates the underlying ring buffer and starts a</span>
<span class="sd">    new task that updates the ring buffer with new incoming samples.</span>
<span class="sd">    The task stops running only if the channel receiver is closed.</span>

<span class="sd">    Args:</span>
<span class="sd">        size: The time span of the moving window over which samples will be stored.</span>
<span class="sd">        resampled_data_recv: A receiver that delivers samples with a</span>
<span class="sd">            given sampling period.</span>
<span class="sd">        input_sampling_period: The time interval between consecutive input samples.</span>
<span class="sd">        resampler_config: The resampler configuration in case resampling is required.</span>
<span class="sd">        align_to: A datetime object that defines a point in time to which</span>
<span class="sd">            the window is aligned to modulo window size. For further</span>
<span class="sd">            information, consult the class level documentation.</span>

<span class="sd">    Raises:</span>
<span class="sd">        asyncio.CancelledError: when the task gets cancelled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">input_sampling_period</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="p">),</span> <span class="s2">&quot;The input sampling period should be greater than zero.&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">input_sampling_period</span> <span class="o">&lt;=</span> <span class="n">size</span>
    <span class="p">),</span> <span class="s2">&quot;The input sampling period should be equal to or lower than the window size.&quot;</span>

    <span class="n">sampling</span> <span class="o">=</span> <span class="n">input_sampling_period</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span><span class="p">:</span> <span class="n">Resampler</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_sender</span><span class="p">:</span> <span class="n">Sender</span><span class="p">[</span><span class="n">Sample</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">resampler_config</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span>
            <span class="n">resampler_config</span><span class="o">.</span><span class="n">resampling_period</span> <span class="o">&lt;=</span> <span class="n">size</span>
        <span class="p">),</span> <span class="s2">&quot;The resampling period should be equal to or lower than the window size.&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span> <span class="o">=</span> <span class="n">Resampler</span><span class="p">(</span><span class="n">resampler_config</span><span class="p">)</span>
        <span class="n">sampling</span> <span class="o">=</span> <span class="n">resampler_config</span><span class="o">.</span><span class="n">resampling_period</span>

    <span class="c1"># Sampling period might not fit perfectly into the window size.</span>
    <span class="n">num_samples</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">size</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="n">sampling</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">())</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_resampled_data_recv</span> <span class="o">=</span> <span class="n">resampled_data_recv</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span> <span class="o">=</span> <span class="n">OrderedRingBuffer</span><span class="p">(</span>
        <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
        <span class="n">sampling_period</span><span class="o">=</span><span class="n">sampling</span><span class="p">,</span>
        <span class="n">align_to</span><span class="o">=</span><span class="n">align_to</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_configure_resampler</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_update_window_task</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_run_impl</span><span class="p">()</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._moving_window.MovingWindow.__len__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

<a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.__len__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Return the size of the <code>MovingWindow</code>s underlying buffer.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>The size of the <code>MovingWindow</code>.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_moving_window.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the size of the `MovingWindow`s underlying buffer.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The size of the `MovingWindow`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._moving_window.MovingWindow.stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._moving_window.MovingWindow.stop" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Cancel the running tasks and stop the MovingWindow.</p>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_moving_window.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cancel the running tasks and stop the MovingWindow.&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">cancel_and_await</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_window_task</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">cancel_and_await</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_resampler_task</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.timeseries.ResamplerConfig" class="doc doc-heading">
        <code>frequenz.sdk.timeseries.ResamplerConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#frequenz.sdk.timeseries.ResamplerConfig" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">

  
      <p>Resampler configuration.</p>


        <details class="quote">
          <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_resampling.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ResamplerConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resampler configuration.&quot;&quot;&quot;</span>

    <span class="n">resampling_period</span><span class="p">:</span> <span class="n">timedelta</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The resampling period.</span>

<span class="sd">    This is the time it passes between resampled data should be calculated.</span>

<span class="sd">    It must be a positive time span.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_data_age_in_periods</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The maximum age a sample can have to be considered *relevant* for resampling.</span>

<span class="sd">    Expressed in number of periods, where period is the `resampling_period`</span>
<span class="sd">    if we are downsampling (resampling period bigger than the input period) or</span>
<span class="sd">    the input sampling period if we are upsampling (input period bigger than</span>
<span class="sd">    the resampling period).</span>

<span class="sd">    It must be bigger than 1.0.</span>

<span class="sd">    Example:</span>
<span class="sd">        If `resampling_period` is 3 seconds, the input sampling period is</span>
<span class="sd">        1 and `max_data_age_in_periods` is 2, then data older than 3*2</span>
<span class="sd">        = 6 seconds will be discarded when creating a new sample and never</span>
<span class="sd">        passed to the resampling function.</span>

<span class="sd">        If `resampling_period` is 3 seconds, the input sampling period is</span>
<span class="sd">        5 and `max_data_age_in_periods` is 2, then data older than 5*2</span>
<span class="sd">        = 10 seconds will be discarded when creating a new sample and never</span>
<span class="sd">        passed to the resampling function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">resampling_function</span><span class="p">:</span> <span class="n">ResamplingFunction</span> <span class="o">=</span> <span class="n">average</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The resampling function.</span>

<span class="sd">    This function will be applied to the sequence of relevant samples at</span>
<span class="sd">    a given time. The result of the function is what is sent as the resampled</span>
<span class="sd">    value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">initial_buffer_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_BUFFER_LEN_INIT</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The initial length of the resampling buffer.</span>

<span class="sd">    The buffer could grow or shrink depending on the source properties,</span>
<span class="sd">    like sampling rate, to make sure all the requested past sampling periods</span>
<span class="sd">    can be stored.</span>

<span class="sd">    It must be at least 1 and at most `max_buffer_len`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">warn_buffer_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_BUFFER_LEN_WARN</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The minimum length of the resampling buffer that will emit a warning.</span>

<span class="sd">    If a buffer grows bigger than this value, it will emit a warning in the</span>
<span class="sd">    logs, so buffers don&#39;t grow too big inadvertently.</span>

<span class="sd">    It must be at least 1 and at most `max_buffer_len`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">max_buffer_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_BUFFER_LEN_MAX</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The maximum length of the resampling buffer.</span>

<span class="sd">    Buffers won&#39;t be allowed to grow beyond this point even if it would be</span>
<span class="sd">    needed to keep all the requested past sampling periods. An error will be</span>
<span class="sd">    emitted in the logs if the buffer length needs to be truncated to this</span>
<span class="sd">    value.</span>

<span class="sd">    It must be at bigger than `warn_buffer_len`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">align_to</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">UNIX_EPOCH</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The time to align the resampling period to.</span>

<span class="sd">    The resampling period will be aligned to this time, so the first resampled</span>
<span class="sd">    sample will be at the first multiple of `resampling_period` starting from</span>
<span class="sd">    `align_to`. It must be an aware datetime and can be in the future too.</span>

<span class="sd">    If `align_to` is `None`, the resampling period will be aligned to the</span>
<span class="sd">    time the resampler is created.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that config values are valid.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If any value is out of range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resampling_period</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;resampling_period (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resampling_period</span><span class="si">}</span><span class="s2">) must be positive&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_data_age_in_periods</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;max_data_age_in_periods (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_data_age_in_periods</span><span class="si">}</span><span class="s2">) should be at least 1.0&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;warn_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="si">}</span><span class="s2">) should be at least 1&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;max_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span><span class="si">}</span><span class="s2">) should &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;be bigger than warn_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;initial_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span><span class="si">}</span><span class="s2">) should at least 1&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;initial_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span><span class="si">}</span><span class="s2">) is bigger &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;than max_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span><span class="si">}</span><span class="s2">), use a smaller &quot;</span>
                <span class="s2">&quot;initial_buffer_len or a bigger max_buffer_len&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="p">:</span>
            <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;initial_buffer_len (</span><span class="si">%s</span><span class="s2">) is bigger than warn_buffer_len (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">align_to</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">align_to</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;align_to (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">align_to</span><span class="si">}</span><span class="s2">) should be a timezone aware datetime&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">





<h5 id="frequenz.sdk.timeseries.ResamplerConfig-attributes">Attributes<a href="#frequenz.sdk.timeseries.ResamplerConfig-attributes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.align_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">align_to</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">UNIX_EPOCH</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.align_to" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The time to align the resampling period to.</p>
<p>The resampling period will be aligned to this time, so the first resampled
sample will be at the first multiple of <code>resampling_period</code> starting from
<code>align_to</code>. It must be an aware datetime and can be in the future too.</p>
<p>If <code>align_to</code> is <code>None</code>, the resampling period will be aligned to the
time the resampler is created.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.initial_buffer_len" class="doc doc-heading">
<code class="highlight language-python"><span class="n">initial_buffer_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_BUFFER_LEN_INIT</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.initial_buffer_len" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The initial length of the resampling buffer.</p>
<p>The buffer could grow or shrink depending on the source properties,
like sampling rate, to make sure all the requested past sampling periods
can be stored.</p>
<p>It must be at least 1 and at most <code>max_buffer_len</code>.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.max_buffer_len" class="doc doc-heading">
<code class="highlight language-python"><span class="n">max_buffer_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_BUFFER_LEN_MAX</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.max_buffer_len" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The maximum length of the resampling buffer.</p>
<p>Buffers won't be allowed to grow beyond this point even if it would be
needed to keep all the requested past sampling periods. An error will be
emitted in the logs if the buffer length needs to be truncated to this
value.</p>
<p>It must be at bigger than <code>warn_buffer_len</code>.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.max_data_age_in_periods" class="doc doc-heading">
<code class="highlight language-python"><span class="n">max_data_age_in_periods</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.max_data_age_in_periods" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The maximum age a sample can have to be considered <em>relevant</em> for resampling.</p>
<p>Expressed in number of periods, where period is the <code>resampling_period</code>
if we are downsampling (resampling period bigger than the input period) or
the input sampling period if we are upsampling (input period bigger than
the resampling period).</p>
<p>It must be bigger than 1.0.</p>

<details class="example" open>
  <summary>Example</summary>
  <p>If <code>resampling_period</code> is 3 seconds, the input sampling period is
1 and <code>max_data_age_in_periods</code> is 2, then data older than 3*2
= 6 seconds will be discarded when creating a new sample and never
passed to the resampling function.</p>
<p>If <code>resampling_period</code> is 3 seconds, the input sampling period is
5 and <code>max_data_age_in_periods</code> is 2, then data older than 5*2
= 10 seconds will be discarded when creating a new sample and never
passed to the resampling function.</p>
</details>  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.resampling_function" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resampling_function</span><span class="p">:</span> <span class="n">ResamplingFunction</span> <span class="o">=</span> <span class="n">average</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.resampling_function" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The resampling function.</p>
<p>This function will be applied to the sequence of relevant samples at
a given time. The result of the function is what is sent as the resampled
value.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.resampling_period" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resampling_period</span><span class="p">:</span> <span class="n">timedelta</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.resampling_period" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The resampling period.</p>
<p>This is the time it passes between resampled data should be calculated.</p>
<p>It must be a positive time span.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.warn_buffer_len" class="doc doc-heading">
<code class="highlight language-python"><span class="n">warn_buffer_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">DEFAULT_BUFFER_LEN_WARN</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.warn_buffer_len" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The minimum length of the resampling buffer that will emit a warning.</p>
<p>If a buffer grows bigger than this value, it will emit a warning in the
logs, so buffers don't grow too big inadvertently.</p>
<p>It must be at least 1 and at most <code>max_buffer_len</code>.</p>
  </div>

</div>

<h5 id="frequenz.sdk.timeseries.ResamplerConfig-functions">Functions<a href="#frequenz.sdk.timeseries.ResamplerConfig-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._resampling.ResamplerConfig.__post_init__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

<a href="#frequenz.sdk.timeseries._resampling.ResamplerConfig.__post_init__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Check that config values are valid.</p>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>If any value is out of range.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_resampling.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check that config values are valid.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If any value is out of range.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resampling_period</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;resampling_period (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resampling_period</span><span class="si">}</span><span class="s2">) must be positive&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_data_age_in_periods</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;max_data_age_in_periods (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_data_age_in_periods</span><span class="si">}</span><span class="s2">) should be at least 1.0&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;warn_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="si">}</span><span class="s2">) should be at least 1&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;max_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span><span class="si">}</span><span class="s2">) should &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;be bigger than warn_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;initial_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span><span class="si">}</span><span class="s2">) should at least 1&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;initial_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span><span class="si">}</span><span class="s2">) is bigger &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;than max_buffer_len (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_buffer_len</span><span class="si">}</span><span class="s2">), use a smaller &quot;</span>
            <span class="s2">&quot;initial_buffer_len or a bigger max_buffer_len&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="p">:</span>
        <span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;initial_buffer_len (</span><span class="si">%s</span><span class="s2">) is bigger than warn_buffer_len (</span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initial_buffer_len</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warn_buffer_len</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">align_to</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">align_to</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;align_to (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">align_to</span><span class="si">}</span><span class="s2">) should be a timezone aware datetime&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.timeseries.Sample" class="doc doc-heading">
        <code>frequenz.sdk.timeseries.Sample</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#frequenz.sdk.timeseries.Sample" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">

  
      <p>A measurement taken at a particular point in time.</p>
<p>The <code>value</code> could be <code>None</code> if a component is malfunctioning or data is
lacking for another reason, but a sample still needs to be sent to have a
coherent view on a group of component metrics for a particular timestamp.</p>


        <details class="quote">
          <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_base_types.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Sample</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A measurement taken at a particular point in time.</span>

<span class="sd">    The `value` could be `None` if a component is malfunctioning or data is</span>
<span class="sd">    lacking for another reason, but a sample still needs to be sent to have a</span>
<span class="sd">    coherent view on a group of component metrics for a particular timestamp.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The time when this sample was generated.&quot;&quot;&quot;</span>

    <span class="n">value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The value of this sample.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">





<h5 id="frequenz.sdk.timeseries.Sample-attributes">Attributes<a href="#frequenz.sdk.timeseries.Sample-attributes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._base_types.Sample.timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._base_types.Sample.timestamp" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The time when this sample was generated.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._base_types.Sample.value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._base_types.Sample.value" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The value of this sample.</p>
  </div>

</div>





  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.timeseries.Sample3Phase" class="doc doc-heading">
        <code>frequenz.sdk.timeseries.Sample3Phase</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#frequenz.sdk.timeseries.Sample3Phase" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">

  
      <p>A 3-phase measurement made at a particular point in time.</p>
<p>Each of the <code>value</code> fields could be <code>None</code> if a component is malfunctioning
or data is lacking for another reason, but a sample still needs to be sent
to have a coherent view on a group of component metrics for a particular
timestamp.</p>


        <details class="quote">
          <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_base_types.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Sample3Phase</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A 3-phase measurement made at a particular point in time.</span>

<span class="sd">    Each of the `value` fields could be `None` if a component is malfunctioning</span>
<span class="sd">    or data is lacking for another reason, but a sample still needs to be sent</span>
<span class="sd">    to have a coherent view on a group of component metrics for a particular</span>
<span class="sd">    timestamp.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The time when this sample was generated.&quot;&quot;&quot;</span>
    <span class="n">value_p1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The value of the 1st phase in this sample.&quot;&quot;&quot;</span>

    <span class="n">value_p2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The value of the 2nd phase in this sample.&quot;&quot;&quot;</span>

    <span class="n">value_p3</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The value of the 3rd phase in this sample.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return an iterator that yields values from each of the phases.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Per-phase measurements one-by-one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p1</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p2</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p3</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the max value among all phases, or default if they are all `None`.</span>

<span class="sd">        Args:</span>
<span class="sd">            default: value to return if all phases are `None`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Max value among all phases, if available, default value otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">default</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="k">else</span> <span class="n">y</span><span class="p">,</span>
            <span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the min value among all phases, or default if they are all `None`.</span>

<span class="sd">        Args:</span>
<span class="sd">            default: value to return if all phases are `None`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Min value among all phases, if available, default value otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">default</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="k">else</span> <span class="n">y</span><span class="p">,</span>
            <span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">float</span><span class="p">],</span> <span class="nb">float</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the given function on each of the phase values and return the result.</span>

<span class="sd">        If a phase value is `None`, replace it with `default` instead.</span>

<span class="sd">        Args:</span>
<span class="sd">            function: The function to apply on each of the phase values.</span>
<span class="sd">            default: The value to apply if a phase value is `None`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new instance, with the given function applied on values for each of the</span>
<span class="sd">                phases.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">value_p1</span><span class="o">=</span><span class="n">default</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p1</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_p1</span><span class="p">),</span>
            <span class="n">value_p2</span><span class="o">=</span><span class="n">default</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_p2</span><span class="p">),</span>
            <span class="n">value_p3</span><span class="o">=</span><span class="n">default</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p3</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_p3</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">





<h5 id="frequenz.sdk.timeseries.Sample3Phase-attributes">Attributes<a href="#frequenz.sdk.timeseries.Sample3Phase-attributes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.timestamp" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The time when this sample was generated.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.value_p1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_p1</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.value_p1" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The value of the 1st phase in this sample.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.value_p2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_p2</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.value_p2" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The value of the 2nd phase in this sample.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.value_p3" class="doc doc-heading">
<code class="highlight language-python"><span class="n">value_p3</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.value_p3" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>The value of the 3rd phase in this sample.</p>
  </div>

</div>

<h5 id="frequenz.sdk.timeseries.Sample3Phase-functions">Functions<a href="#frequenz.sdk.timeseries.Sample3Phase-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.__iter__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.__iter__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Return an iterator that yields values from each of the phases.</p>

  <table>
    <thead>
      <tr>
        <th><b>YIELDS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-yields-annotation">
                  <code><a class="autorefs autorefs-external" title="typing.Iterator" href="https://docs.python.org/3/library/typing.html#typing.Iterator">Iterator</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None]</code>
              </span>
          </td>
          <td class="doc-yields-details">
            <p>Per-phase measurements one-by-one.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_base_types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return an iterator that yields values from each of the phases.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Per-phase measurements one-by-one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p1</span>
    <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p2</span>
    <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p3</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.map" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">map</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.map" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Apply the given function on each of the phase values and return the result.</p>
<p>If a phase value is <code>None</code>, replace it with <code>default</code> instead.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>function</code></td>
          <td class="doc-param-details">
            <p>The function to apply on each of the phase values.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>default</code></td>
          <td class="doc-param-details">
            <p>The value to apply if a phase value is <code>None</code>.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>A new instance, with the given function applied on values for each of the
phases.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_base_types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">float</span><span class="p">],</span> <span class="nb">float</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply the given function on each of the phase values and return the result.</span>

<span class="sd">    If a phase value is `None`, replace it with `default` instead.</span>

<span class="sd">    Args:</span>
<span class="sd">        function: The function to apply on each of the phase values.</span>
<span class="sd">        default: The value to apply if a phase value is `None`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new instance, with the given function applied on values for each of the</span>
<span class="sd">            phases.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">value_p1</span><span class="o">=</span><span class="n">default</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p1</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_p1</span><span class="p">),</span>
        <span class="n">value_p2</span><span class="o">=</span><span class="n">default</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_p2</span><span class="p">),</span>
        <span class="n">value_p3</span><span class="o">=</span><span class="n">default</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_p3</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value_p3</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.max" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">max</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.max" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Return the max value among all phases, or default if they are all <code>None</code>.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>default</code></td>
          <td class="doc-param-details">
            <p>value to return if all phases are <code>None</code>.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Max value among all phases, if available, default value otherwise.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_base_types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the max value among all phases, or default if they are all `None`.</span>

<span class="sd">    Args:</span>
<span class="sd">        default: value to return if all phases are `None`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Max value among all phases, if available, default value otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">default</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="k">else</span> <span class="n">y</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.timeseries._base_types.Sample3Phase.min" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">min</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#frequenz.sdk.timeseries._base_types.Sample3Phase.min" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Return the min value among all phases, or default if they are all <code>None</code>.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>default</code></td>
          <td class="doc-param-details">
            <p>value to return if all phases are <code>None</code>.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Min value among all phases, if available, default value otherwise.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/opt/hostedtoolcache/Python/3.11.3/x64/lib/python3.11/site-packages/frequenz/sdk/timeseries/_base_types.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the min value among all phases, or default if they are all `None`.</span>

<span class="sd">    Args:</span>
<span class="sd">        default: value to return if all phases are `None`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Min value among all phases, if available, default value otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">default</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="k">else</span> <span class="n">y</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Frequenz Energy-as-a-Service GmbH
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/frequenz-floss" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/frequenz-com" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>