
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Frequenz Python SDK.">
      
      
        <meta name="author" content="Frequenz Energy-as-a-Service GmbH">
      
      
      <link rel="icon" href="../../../../../logo.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>time_series - Frequenz Python SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../../css/style.css">
    
      <link rel="stylesheet" href="../../../../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frequenz.sdk.data_handling.time_series" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest (stable) version.
  <a href="../../../../../.."> 
    <strong>Click here to go to latest (stable) version</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Frequenz Python SDK" class="md-header__button md-logo" aria-label="Frequenz Python SDK" data-md-component="logo">
      
  <img src="../../../../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Frequenz Python SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              time_series
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/frequenz-floss/frequenz-sdk-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    frequenz-sdk-python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        API Reference
      </a>
    </li>
  

  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../../CONTRIBUTING/" class="md-tabs__link">
      Development
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Frequenz Python SDK" class="md-nav__button md-logo" aria-label="Frequenz Python SDK" data-md-component="logo">
      
  <img src="../../../../../logo.png" alt="logo">

    </a>
    Frequenz Python SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/frequenz-floss/frequenz-sdk-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    frequenz-sdk-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          frequenz
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="frequenz" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          frequenz
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1" type="checkbox" id="__nav_2_1_1" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">sdk</a>
          
            <label for="__nav_2_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="sdk" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          sdk
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_1" type="checkbox" id="__nav_2_1_1_1" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../actor/">actor</a>
          
            <label for="__nav_2_1_1_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="actor" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          actor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../actor/channel_registry/" class="md-nav__link">
        channel_registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_1_2" type="checkbox" id="__nav_2_1_1_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../actor/data_sourcing/">data_sourcing</a>
          
            <label for="__nav_2_1_1_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="data_sourcing" data-md-level="5">
        <label class="md-nav__title" for="__nav_2_1_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          data_sourcing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../actor/data_sourcing/data_sourcing/" class="md-nav__link">
        data_sourcing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../actor/data_sourcing/microgrid_api_source/" class="md-nav__link">
        microgrid_api_source
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../actor/data_sourcing/types/" class="md-nav__link">
        types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../actor/decorator/" class="md-nav__link">
        decorator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../actor/resampling/" class="md-nav__link">
        resampling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_2" type="checkbox" id="__nav_2_1_1_2" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../api_client/">api_client</a>
          
            <label for="__nav_2_1_1_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="api_client" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          api_client
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_client/api_client/" class="md-nav__link">
        api_client
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_3" type="checkbox" id="__nav_2_1_1_3" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../configs/">configs</a>
          
            <label for="__nav_2_1_1_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="configs" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_3">
          <span class="md-nav__icon md-icon"></span>
          configs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configs/config/" class="md-nav__link">
        config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configs/config_manager/" class="md-nav__link">
        config_manager
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_4" type="checkbox" id="__nav_2_1_1_4" checked>
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">data_handling</a>
          
            <label for="__nav_2_1_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="data_handling" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_4">
          <span class="md-nav__icon md-icon"></span>
          data_handling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../formula/" class="md-nav__link">
        formula
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gen_historic_data_features/" class="md-nav__link">
        gen_historic_data_features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../handle_historic_data/" class="md-nav__link">
        handle_historic_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power/" class="md-nav__link">
        power
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          time_series
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        time_series
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series" class="md-nav__link">
    time_series
  </a>
  
    <nav class="md-nav" aria-label="time_series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.BatteryField" class="md-nav__link">
    BatteryField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult" class="md-nav__link">
    CacheEntryLookupResult
  </a>
  
    <nav class="md-nav" aria-label="CacheEntryLookupResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult.Status" class="md-nav__link">
    Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.ComponentField" class="md-nav__link">
    ComponentField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.EVChargerField" class="md-nav__link">
    EVChargerField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.InverterField" class="md-nav__link">
    InverterField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache" class="md-nav__link">
    LatestEntryCache
  </a>
  
    <nav class="md-nav" aria-label="LatestEntryCache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__contains__" class="md-nav__link">
    __contains__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.clear" class="md-nav__link">
    clear()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.keys" class="md-nav__link">
    keys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.latest_timestamp" class="md-nav__link">
    latest_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.pop" class="md-nav__link">
    pop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.reset" class="md-nav__link">
    reset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.reset_latest_timestamp" class="md-nav__link">
    reset_latest_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.update" class="md-nav__link">
    update()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.MeterField" class="md-nav__link">
    MeterField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolComponentCategory" class="md-nav__link">
    SymbolComponentCategory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolMapping" class="md-nav__link">
    SymbolMapping
  </a>
  
    <nav class="md-nav" aria-label="SymbolMapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolMapping-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolMapping.symbol" class="md-nav__link">
    symbol()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry" class="md-nav__link">
    TimeSeriesEntry
  </a>
  
    <nav class="md-nav" aria-label="TimeSeriesEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.Status" class="md-nav__link">
    Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_error" class="md-nav__link">
    create_error()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_unknown" class="md-nav__link">
    create_unknown()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula" class="md-nav__link">
    TimeSeriesFormula
  </a>
  
    <nav class="md-nav" aria-label="TimeSeriesFormula">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula.evaluate" class="md-nav__link">
    evaluate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_5" type="checkbox" id="__nav_2_1_1_5" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data_ingestion/">data_ingestion</a>
          
            <label for="__nav_2_1_1_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="data_ingestion" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_5">
          <span class="md-nav__icon md-icon"></span>
          data_ingestion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_ingestion/component_info/" class="md-nav__link">
        component_info
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_ingestion/constants/" class="md-nav__link">
        constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_ingestion/formula_calculator/" class="md-nav__link">
        formula_calculator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_ingestion/gen_component_receivers/" class="md-nav__link">
        gen_component_receivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_ingestion/load_historic_data/" class="md-nav__link">
        load_historic_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_ingestion/microgrid_data/" class="md-nav__link">
        microgrid_data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_6" type="checkbox" id="__nav_2_1_1_6" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../microgrid/">microgrid</a>
          
            <label for="__nav_2_1_1_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="microgrid" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_6">
          <span class="md-nav__icon md-icon"></span>
          microgrid
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/client/" class="md-nav__link">
        client
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/component/" class="md-nav__link">
        component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/component_data/" class="md-nav__link">
        component_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/component_states/" class="md-nav__link">
        component_states
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/connection/" class="md-nav__link">
        connection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/graph/" class="md-nav__link">
        graph
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/microgrid_api/" class="md-nav__link">
        microgrid_api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microgrid/retry/" class="md-nav__link">
        retry
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_7" type="checkbox" id="__nav_2_1_1_7" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../power_distribution/">power_distribution</a>
          
            <label for="__nav_2_1_1_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="power_distribution" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_7">
          <span class="md-nav__icon md-icon"></span>
          power_distribution
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../power_distribution/distribution_algorithm/" class="md-nav__link">
        distribution_algorithm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../power_distribution/power_distributor/" class="md-nav__link">
        power_distributor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../power_distribution/utils/" class="md-nav__link">
        utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1_8" type="checkbox" id="__nav_2_1_1_8" >
      
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../timeseries/">timeseries</a>
          
            <label for="__nav_2_1_1_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="timeseries" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_1_8">
          <span class="md-nav__icon md-icon"></span>
          timeseries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../timeseries/sample/" class="md-nav__link">
        sample
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../CONTRIBUTING/" class="md-nav__link">
        Development
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series" class="md-nav__link">
    time_series
  </a>
  
    <nav class="md-nav" aria-label="time_series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.BatteryField" class="md-nav__link">
    BatteryField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult" class="md-nav__link">
    CacheEntryLookupResult
  </a>
  
    <nav class="md-nav" aria-label="CacheEntryLookupResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult.Status" class="md-nav__link">
    Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.ComponentField" class="md-nav__link">
    ComponentField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.EVChargerField" class="md-nav__link">
    EVChargerField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.InverterField" class="md-nav__link">
    InverterField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache" class="md-nav__link">
    LatestEntryCache
  </a>
  
    <nav class="md-nav" aria-label="LatestEntryCache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__contains__" class="md-nav__link">
    __contains__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.clear" class="md-nav__link">
    clear()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.keys" class="md-nav__link">
    keys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.latest_timestamp" class="md-nav__link">
    latest_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.pop" class="md-nav__link">
    pop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.reset" class="md-nav__link">
    reset()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.reset_latest_timestamp" class="md-nav__link">
    reset_latest_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.update" class="md-nav__link">
    update()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.MeterField" class="md-nav__link">
    MeterField
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolComponentCategory" class="md-nav__link">
    SymbolComponentCategory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolMapping" class="md-nav__link">
    SymbolMapping
  </a>
  
    <nav class="md-nav" aria-label="SymbolMapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolMapping-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.SymbolMapping.symbol" class="md-nav__link">
    symbol()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry" class="md-nav__link">
    TimeSeriesEntry
  </a>
  
    <nav class="md-nav" aria-label="TimeSeriesEntry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.Status" class="md-nav__link">
    Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_error" class="md-nav__link">
    create_error()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_unknown" class="md-nav__link">
    create_unknown()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula" class="md-nav__link">
    TimeSeriesFormula
  </a>
  
    <nav class="md-nav" aria-label="TimeSeriesFormula">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula.evaluate" class="md-nav__link">
    evaluate()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/frequenz-floss/frequenz-sdk-python/edit/v0.x.x/src/frequenz/sdk/data_handling/time_series.py" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
  </a>


  <h1>time_series</h1>

<div class="doc doc-object doc-module">



<h2 id="frequenz.sdk.data_handling.time_series" class="doc doc-heading">
          <code>frequenz.sdk.data_handling.time_series</code>


<a href="#frequenz.sdk.data_handling.time_series" class="headerlink" title="Permanent link">¤</a></h2>

  <div class="doc doc-contents first">
  
      <p>Helper classes for tracking values from time-series data streams.</p>

  

  <div class="doc doc-children">






<h3 id="frequenz.sdk.data_handling.time_series-classes">Classes<a href="#frequenz.sdk.data_handling.time_series-classes" class="headerlink" title="Permanent link">¤</a></h3>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.BatteryField" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.BatteryField</code>


<a href="#frequenz.sdk.data_handling.time_series.BatteryField" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.ComponentField" href="#frequenz.sdk.data_handling.time_series.ComponentField">ComponentField</a></code></p>

  
      <p>Name of the fields from streamed battery data.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BatteryField</span><span class="p">(</span><span class="n">ComponentField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Name of the fields from streamed battery data.&quot;&quot;&quot;</span>

    <span class="n">SOC</span> <span class="o">=</span> <span class="s2">&quot;soc&quot;</span>
    <span class="n">CAPACITY</span> <span class="o">=</span> <span class="s2">&quot;capacity&quot;</span>
    <span class="n">POWER_UPPER_BOUND</span> <span class="o">=</span> <span class="s2">&quot;power_upper_bound&quot;</span>
    <span class="n">POWER_LOWER_BOUND</span> <span class="o">=</span> <span class="s2">&quot;power_lower_bound&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.CacheEntryLookupResult" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.CacheEntryLookupResult</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" title="typing.Generic" href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code></p>

  
      <p>Component ids and meter connections for components of a specific type.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CacheEntryLookupResult</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">Value</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Component ids and meter connections for components of a specific type.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Possible outcomes of looking up a key in a cache.&quot;&quot;&quot;</span>

        <span class="n">HIT</span> <span class="o">=</span> <span class="s2">&quot;hit&quot;</span>
        <span class="n">MISS</span> <span class="o">=</span> <span class="s2">&quot;miss&quot;</span>
        <span class="n">EXPIRED</span> <span class="o">=</span> <span class="s2">&quot;expired&quot;</span>

    <span class="n">status</span><span class="p">:</span> <span class="n">Status</span>
    <span class="n">entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">






<h5 id="frequenz.sdk.data_handling.time_series.CacheEntryLookupResult-classes">Classes<a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult-classes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-class">



<h6 id="frequenz.sdk.data_handling.time_series.CacheEntryLookupResult.Status" class="doc doc-heading">
        <code>Status</code>


<a href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult.Status" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/enum.html#module-enum">enum</a>.<a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>

  
      <p>Possible outcomes of looking up a key in a cache.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possible outcomes of looking up a key in a cache.&quot;&quot;&quot;</span>

    <span class="n">HIT</span> <span class="o">=</span> <span class="s2">&quot;hit&quot;</span>
    <span class="n">MISS</span> <span class="o">=</span> <span class="s2">&quot;miss&quot;</span>
    <span class="n">EXPIRED</span> <span class="o">=</span> <span class="s2">&quot;expired&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.ComponentField" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.ComponentField</code>


<a href="#frequenz.sdk.data_handling.time_series.ComponentField" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/enum.html#module-enum">enum</a>.<a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>

  
      <p>Name of the field from streamed component data.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ComponentField</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Name of the field from streamed component data.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.EVChargerField" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.EVChargerField</code>


<a href="#frequenz.sdk.data_handling.time_series.EVChargerField" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.ComponentField" href="#frequenz.sdk.data_handling.time_series.ComponentField">ComponentField</a></code></p>

  
      <p>Name of the fields from streamed ev charger data.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EVChargerField</span><span class="p">(</span><span class="n">ComponentField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Name of the fields from streamed ev charger data.&quot;&quot;&quot;</span>

    <span class="n">ACTIVE_POWER</span> <span class="o">=</span> <span class="s2">&quot;active_power&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.InverterField" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.InverterField</code>


<a href="#frequenz.sdk.data_handling.time_series.InverterField" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.ComponentField" href="#frequenz.sdk.data_handling.time_series.ComponentField">ComponentField</a></code></p>

  
      <p>Name of the fields from streamed inverter data.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">InverterField</span><span class="p">(</span><span class="n">ComponentField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Name of the fields from streamed inverter data.&quot;&quot;&quot;</span>

    <span class="n">ACTIVE_POWER</span> <span class="o">=</span> <span class="s2">&quot;active_power&quot;</span>
    <span class="n">ACTIVE_POWER_UPPER_BOUND</span> <span class="o">=</span> <span class="s2">&quot;active_power_upper_bound&quot;</span>
    <span class="n">ACTIVE_POWER_LOWER_BOUND</span> <span class="o">=</span> <span class="s2">&quot;active_power_lower_bound&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.LatestEntryCache" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.LatestEntryCache</code>


<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" title="typing.Generic" href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic</a>[<span title="frequenz.sdk.data_handling.time_series.Key">Key</span>, <span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code></p>

  
      <p>Cache of the most recent values observed in one or more time series.</p>
<p>Each time series is identified in the cache via a unique <code>Key</code>, and it is
expected that every time series will be of the same type of <code>Value</code>.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LatestEntryCache</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">Key</span><span class="p">,</span> <span class="n">Value</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Cache of the most recent values observed in one or more time series.</span>

<span class="sd">    Each time series is identified in the cache via a unique `Key`, and it is</span>
<span class="sd">    expected that every time series will be of the same type of `Value`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize the class.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Key</span><span class="p">,</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latest_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the most recently observed timestamp across all keys in the cache.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The highest timestamp out of all entries in the cache, or `datetime.min`</span>
<span class="sd">                if there are no cache entries.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Clear all entries from the cache.</span>

<span class="sd">        This will not affect `latest_timestamp`.  If you want to restore the</span>
<span class="sd">        cache to its initial state, use the `reset` method instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check if a cache entry exists for the specified key.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: key to search for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if the cache contains an entry for `key`, `False` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">,</span>
        <span class="n">timedelta_tolerance</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
        <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CacheEntryLookupResult</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the cached entry for the specified key, if any.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: key for which to look up the cached entry</span>
<span class="sd">            timedelta_tolerance: maximum permitted time difference between</span>
<span class="sd">                `latest_timestamp` and the timestamp of the cached entry</span>
<span class="sd">            default: what to return if the `key` is not found in the cache, or if the</span>
<span class="sd">                cached entry is not within the limits of `timedelta_tolerance`</span>

<span class="sd">        Returns:</span>
<span class="sd">            The cached entry associated with the provided `key`, or `default` if</span>
<span class="sd">                either there is no entry for the `key`, or if the difference between the</span>
<span class="sd">                cached timestamp and `latest_timestamp` is greater than</span>
<span class="sd">                `timedelta_tolerance`</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: when either timedelta_tolerance is negative or an entry</span>
<span class="sd">                retrieved from the cache has a timestamp greater than the latest saved</span>
<span class="sd">                timestamp across all cache keys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">timedelta_tolerance</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;timedelta_tolerance cannot be less than 0, but &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timedelta_tolerance</span><span class="si">}</span><span class="s2"> was provided&quot;</span>
            <span class="p">)</span>

        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;LatestEntryCache: missing data for key </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
                <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">MISS</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">default</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Timestamp of single entry in the cache cannot be greater&quot;</span>
                <span class="s2">&quot; than the latest timestamp across entries for all keys.&quot;</span>
            <span class="p">)</span>

        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">-</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span>

        <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="n">timedelta_tolerance</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;LatestEntryCache: data for key </span><span class="si">%s</span><span class="s2"> is outdated&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;latest timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;entry timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;timedelta: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;tolerance: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timedelta_tolerance</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
                <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">EXPIRED</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">default</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">HIT</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">entry</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collection</span><span class="p">[</span><span class="n">Key</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get all the keys with entries in the cache.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All the keys with an entry in the cache</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the total number of entries stored in the cache.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The total number of keys with entries in the cache.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">,</span>
        <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CacheEntryLookupResult</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Pop the entry for the specified key from the cache, if it exists.</span>

<span class="sd">        Note that this does not affect `latest_timestamp`, even if the removed</span>
<span class="sd">        entry was the only one in the cache.  Use the `reset_latest_timestamp`</span>
<span class="sd">        method to eliminate the impact of timestamps from removed entries.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: key whose cache entry to remove</span>
<span class="sd">            default: what to return if the `key` is not found in the cache</span>

<span class="sd">        Returns:</span>
<span class="sd">            Popped value if it exists, `None` otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
                <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">MISS</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">default</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">HIT</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">entry</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Reset the cache to its default initial state.</span>

<span class="sd">        This will clear out all cache entries and reset the `latest_timestamp`</span>
<span class="sd">        property to `datetime.min`.  It is equivalent to separately calling the</span>
<span class="sd">        `clear` and `reset_latest_timestamp` methods in succession, but is very</span>
<span class="sd">        slightly more efficient.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reset_latest_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Reset the `latest_timestamp` property to the lowest possible value.</span>

<span class="sd">        This will be equal to either the highest timestamp out of any entries</span>
<span class="sd">        remaining in the cache, or `datetime.min` if no entries remain.</span>

<span class="sd">        Note that this is an O(N) operation, so may be expensive.  It is meant</span>
<span class="sd">        to be used only in order to correct an error introduced into the cache,</span>
<span class="sd">        e.g. after removing one or more entries with invalid timestamps.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if the latest timestamp was modified, `False` otherwise.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if the new latest timestamp is greater than the previous one</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">previous</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span>
            <span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">&gt;</span> <span class="n">previous</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The new latest timestamp after reset cannot be greater &quot;</span>
                <span class="s2">&quot;than the latest timestamp before the reset.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">previous</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Insert or update an entry for a specific key.</span>

<span class="sd">        Args:</span>
<span class="sd">            key: key to associate with the entry</span>
<span class="sd">            entry: entry to add to the cache (will be accepted if `key` is new,</span>
<span class="sd">                or if the timestamp of the existing entry is older than</span>
<span class="sd">                `entry.timestamp`)</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if `entry` was added to the cache, `False` otherwise</span>

<span class="sd">        Raises:</span>
<span class="sd">            AttributeError: if timestamps are not timezone-aware</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># sanity check that entry timestamp is valid</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">tzinfo</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Entry&#39;s timestamp must be timezone-aware.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

        <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">last</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="n">last</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;TimeSeriesEntryCache: entry for key </span><span class="si">%s</span><span class="s2"> is outdated&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;previously observed timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">last</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;entry timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<h5 id="frequenz.sdk.data_handling.time_series.LatestEntryCache-functions">Functions<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.__contains__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__contains__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__contains__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Check if a cache entry exists for the specified key.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>key</code></td>
          <td class="doc-param-details">
            <p>key to search for.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="frequenz.sdk.data_handling.time_series.Key">Key</span></code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><code>True</code> if the cache contains an entry for <code>key</code>, <code>False</code> otherwise.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Check if a cache entry exists for the specified key.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: key to search for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the cache contains an entry for `key`, `False` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__init__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Initialize the class.</p>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize the class.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Key</span><span class="p">,</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.__len__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.__len__" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Get the total number of entries stored in the cache.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>The total number of keys with entries in the cache.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the total number of entries stored in the cache.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The total number of keys with entries in the cache.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.clear" class="doc doc-heading">
<code class="highlight language-python"><span class="n">clear</span><span class="p">()</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.clear" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Clear all entries from the cache.</p>
<p>This will not affect <code>latest_timestamp</code>.  If you want to restore the
cache to its initial state, use the <code>reset</code> method instead.</p>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all entries from the cache.</span>

<span class="sd">    This will not affect `latest_timestamp`.  If you want to restore the</span>
<span class="sd">    cache to its initial state, use the `reset` method instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">timedelta_tolerance</span><span class="o">=</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.get" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Get the cached entry for the specified key, if any.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>key</code></td>
          <td class="doc-param-details">
            <p>key for which to look up the cached entry</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="frequenz.sdk.data_handling.time_series.Key">Key</span></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>timedelta_tolerance</code></td>
          <td class="doc-param-details">
            <p>maximum permitted time difference between
<code>latest_timestamp</code> and the timestamp of the cached entry</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.timedelta" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta">timedelta</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>timedelta.max</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>default</code></td>
          <td class="doc-param-details">
            <p>what to return if the <code>key</code> is not found in the cache, or if the
cached entry is not within the limits of <code>timedelta_tolerance</code></p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.CacheEntryLookupResult" href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult">CacheEntryLookupResult</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>The cached entry associated with the provided <code>key</code>, or <code>default</code> if
either there is no entry for the <code>key</code>, or if the difference between the
cached timestamp and <code>latest_timestamp</code> is greater than
<code>timedelta_tolerance</code></p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>when either timedelta_tolerance is negative or an entry
retrieved from the cache has a timestamp greater than the latest saved
timestamp across all cache keys.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">,</span>
    <span class="n">timedelta_tolerance</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CacheEntryLookupResult</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get the cached entry for the specified key, if any.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: key for which to look up the cached entry</span>
<span class="sd">        timedelta_tolerance: maximum permitted time difference between</span>
<span class="sd">            `latest_timestamp` and the timestamp of the cached entry</span>
<span class="sd">        default: what to return if the `key` is not found in the cache, or if the</span>
<span class="sd">            cached entry is not within the limits of `timedelta_tolerance`</span>

<span class="sd">    Returns:</span>
<span class="sd">        The cached entry associated with the provided `key`, or `default` if</span>
<span class="sd">            either there is no entry for the `key`, or if the difference between the</span>
<span class="sd">            cached timestamp and `latest_timestamp` is greater than</span>
<span class="sd">            `timedelta_tolerance`</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: when either timedelta_tolerance is negative or an entry</span>
<span class="sd">            retrieved from the cache has a timestamp greater than the latest saved</span>
<span class="sd">            timestamp across all cache keys.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">timedelta_tolerance</span> <span class="o">&lt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;timedelta_tolerance cannot be less than 0, but &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timedelta_tolerance</span><span class="si">}</span><span class="s2"> was provided&quot;</span>
        <span class="p">)</span>

    <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;LatestEntryCache: missing data for key </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">MISS</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">default</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Timestamp of single entry in the cache cannot be greater&quot;</span>
            <span class="s2">&quot; than the latest timestamp across entries for all keys.&quot;</span>
        <span class="p">)</span>

    <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">-</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span>

    <span class="k">if</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="n">timedelta_tolerance</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;LatestEntryCache: data for key </span><span class="si">%s</span><span class="s2"> is outdated&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;latest timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;entry timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;timedelta: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;tolerance: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timedelta_tolerance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">EXPIRED</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">default</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
        <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">HIT</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">entry</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.keys" class="doc doc-heading">
<code class="highlight language-python"><span class="n">keys</span><span class="p">()</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.keys" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Get all the keys with entries in the cache.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="typing.Collection" href="https://docs.python.org/3/library/typing.html#typing.Collection">Collection</a>[<span title="frequenz.sdk.data_handling.time_series.Key">Key</span>]</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>All the keys with an entry in the cache</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Collection</span><span class="p">[</span><span class="n">Key</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get all the keys with entries in the cache.</span>

<span class="sd">    Returns:</span>
<span class="sd">        All the keys with an entry in the cache</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.latest_timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">latest_timestamp</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.latest_timestamp" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Get the most recently observed timestamp across all keys in the cache.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="datetime.datetime" href="https://docs.python.org/3/library/datetime.html#datetime.datetime">datetime</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>The highest timestamp out of all entries in the cache, or <code>datetime.min</code>
if there are no cache entries.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">latest_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the most recently observed timestamp across all keys in the cache.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The highest timestamp out of all entries in the cache, or `datetime.min`</span>
<span class="sd">            if there are no cache entries.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.pop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.pop" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Pop the entry for the specified key from the cache, if it exists.</p>
<p>Note that this does not affect <code>latest_timestamp</code>, even if the removed
entry was the only one in the cache.  Use the <code>reset_latest_timestamp</code>
method to eliminate the impact of timestamps from removed entries.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>key</code></td>
          <td class="doc-param-details">
            <p>key whose cache entry to remove</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="frequenz.sdk.data_handling.time_series.Key">Key</span></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>default</code></td>
          <td class="doc-param-details">
            <p>what to return if the <code>key</code> is not found in the cache</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.CacheEntryLookupResult" href="#frequenz.sdk.data_handling.time_series.CacheEntryLookupResult">CacheEntryLookupResult</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Popped value if it exists, <code>None</code> otherwise</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pop</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CacheEntryLookupResult</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Pop the entry for the specified key from the cache, if it exists.</span>

<span class="sd">    Note that this does not affect `latest_timestamp`, even if the removed</span>
<span class="sd">    entry was the only one in the cache.  Use the `reset_latest_timestamp`</span>
<span class="sd">    method to eliminate the impact of timestamps from removed entries.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: key whose cache entry to remove</span>
<span class="sd">        default: what to return if the `key` is not found in the cache</span>

<span class="sd">    Returns:</span>
<span class="sd">        Popped value if it exists, `None` otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">MISS</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">default</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">CacheEntryLookupResult</span><span class="p">(</span>
        <span class="n">status</span><span class="o">=</span><span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">HIT</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="n">entry</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.reset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset</span><span class="p">()</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.reset" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Reset the cache to its default initial state.</p>
<p>This will clear out all cache entries and reset the <code>latest_timestamp</code>
property to <code>datetime.min</code>.  It is equivalent to separately calling the
<code>clear</code> and <code>reset_latest_timestamp</code> methods in succession, but is very
slightly more efficient.</p>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Reset the cache to its default initial state.</span>

<span class="sd">    This will clear out all cache entries and reset the `latest_timestamp`</span>
<span class="sd">    property to `datetime.min`.  It is equivalent to separately calling the</span>
<span class="sd">    `clear` and `reset_latest_timestamp` methods in succession, but is very</span>
<span class="sd">    slightly more efficient.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.reset_latest_timestamp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reset_latest_timestamp</span><span class="p">()</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.reset_latest_timestamp" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Reset the <code>latest_timestamp</code> property to the lowest possible value.</p>
<p>This will be equal to either the highest timestamp out of any entries
remaining in the cache, or <code>datetime.min</code> if no entries remain.</p>
<p>Note that this is an O(N) operation, so may be expensive.  It is meant
to be used only in order to correct an error introduced into the cache,
e.g. after removing one or more entries with invalid timestamps.</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><code>True</code> if the latest timestamp was modified, <code>False</code> otherwise.</p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>if the new latest timestamp is greater than the previous one</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">reset_latest_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Reset the `latest_timestamp` property to the lowest possible value.</span>

<span class="sd">    This will be equal to either the highest timestamp out of any entries</span>
<span class="sd">    remaining in the cache, or `datetime.min` if no entries remain.</span>

<span class="sd">    Note that this is an O(N) operation, so may be expensive.  It is meant</span>
<span class="sd">    to be used only in order to correct an error introduced into the cache,</span>
<span class="sd">    e.g. after removing one or more entries with invalid timestamps.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the latest timestamp was modified, `False` otherwise.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if the new latest timestamp is greater than the previous one</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">previous</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">timestamp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span>
        <span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">&gt;</span> <span class="n">previous</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The new latest timestamp after reset cannot be greater &quot;</span>
            <span class="s2">&quot;than the latest timestamp before the reset.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">previous</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.LatestEntryCache.update" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span></code>

<a href="#frequenz.sdk.data_handling.time_series.LatestEntryCache.update" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Insert or update an entry for a specific key.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>key</code></td>
          <td class="doc-param-details">
            <p>key to associate with the entry</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><span title="frequenz.sdk.data_handling.time_series.Key">Key</span></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>entry</code></td>
          <td class="doc-param-details">
            <p>entry to add to the cache (will be accepted if <code>key</code> is new,
or if the timestamp of the existing entry is older than
<code>entry.timestamp</code>)</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p><code>True</code> if <code>entry</code> was added to the cache, <code>False</code> otherwise</p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RAISES</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
            <span class="doc-raises-annotation">
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#AttributeError">AttributeError</a></code>
            </span>
          </td>
          <td class="doc-raises-details">
            <p>if timestamps are not timezone-aware</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Key</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Insert or update an entry for a specific key.</span>

<span class="sd">    Args:</span>
<span class="sd">        key: key to associate with the entry</span>
<span class="sd">        entry: entry to add to the cache (will be accepted if `key` is new,</span>
<span class="sd">            or if the timestamp of the existing entry is older than</span>
<span class="sd">            `entry.timestamp`)</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if `entry` was added to the cache, `False` otherwise</span>

<span class="sd">    Raises:</span>
<span class="sd">        AttributeError: if timestamps are not timezone-aware</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># sanity check that entry timestamp is valid</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">tzinfo</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Entry&#39;s timestamp must be timezone-aware.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_latest_timestamp</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">last</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&gt;</span> <span class="n">last</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;TimeSeriesEntryCache: entry for key </span><span class="si">%s</span><span class="s2"> is outdated&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;previously observed timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">last</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;entry timestamp: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.MeterField" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.MeterField</code>


<a href="#frequenz.sdk.data_handling.time_series.MeterField" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.ComponentField" href="#frequenz.sdk.data_handling.time_series.ComponentField">ComponentField</a></code></p>

  
      <p>Name of the fields from streamed meter data.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MeterField</span><span class="p">(</span><span class="n">ComponentField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Name of the fields from streamed meter data.&quot;&quot;&quot;</span>

    <span class="n">ACTIVE_POWER</span> <span class="o">=</span> <span class="s2">&quot;active_power&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.SymbolComponentCategory" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.SymbolComponentCategory</code>


<a href="#frequenz.sdk.data_handling.time_series.SymbolComponentCategory" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/enum.html#module-enum">enum</a>.<a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>

  
      <p>Allowed component categories used in symbols for formula calculations.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SymbolComponentCategory</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Allowed component categories used in symbols for formula calculations.&quot;&quot;&quot;</span>

    <span class="n">INVERTER</span> <span class="o">=</span> <span class="s2">&quot;inverter&quot;</span>
    <span class="n">BATTERY</span> <span class="o">=</span> <span class="s2">&quot;battery&quot;</span>
    <span class="n">EV_CHARGER</span> <span class="o">=</span> <span class="s2">&quot;ev_charger&quot;</span>
    <span class="n">METER</span> <span class="o">=</span> <span class="s2">&quot;meter&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.SymbolMapping" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.SymbolMapping</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.SymbolMapping" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">

  
      <p>Mappings between formula symbols and streamed component data.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">SymbolMapping</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Mappings between formula symbols and streamed component data.&quot;&quot;&quot;</span>

    <span class="n">category</span><span class="p">:</span> <span class="n">SymbolComponentCategory</span>
    <span class="n">component_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">field</span><span class="p">:</span> <span class="n">ComponentField</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a sympy-compatible symbol from a symbol mapping.</span>

<span class="sd">        For instance,</span>
<span class="sd">        SymbolMapping(SymbolComponentCategory.METER, 5, ComponentField.ACTIVE_POWER)</span>
<span class="sd">        becomes &quot;meter_5_active_power&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            sympy-compatible symbol mapping encoded as a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SYMBOL_SEGMENT_SEPARATOR</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<h5 id="frequenz.sdk.data_handling.time_series.SymbolMapping-functions">Functions<a href="#frequenz.sdk.data_handling.time_series.SymbolMapping-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.SymbolMapping.symbol" class="doc doc-heading">
<code class="highlight language-python"><span class="n">symbol</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.SymbolMapping.symbol" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Create a sympy-compatible symbol from a symbol mapping.</p>
<p>For instance,
SymbolMapping(SymbolComponentCategory.METER, 5, ComponentField.ACTIVE_POWER)
becomes "meter_5_active_power".</p>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>sympy-compatible symbol mapping encoded as a string</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Create a sympy-compatible symbol from a symbol mapping.</span>

<span class="sd">    For instance,</span>
<span class="sd">    SymbolMapping(SymbolComponentCategory.METER, 5, ComponentField.ACTIVE_POWER)</span>
<span class="sd">    becomes &quot;meter_5_active_power&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        sympy-compatible symbol mapping encoded as a string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">SYMBOL_SEGMENT_SEPARATOR</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component_id</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.TimeSeriesEntry</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" title="typing.Generic" href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code></p>

  
      <p>Describes a single observed value (of arbitrary type) at a specific timestamp.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">TimeSeriesEntry</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">Value</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Describes a single observed value (of arbitrary type) at a specific timestamp.&quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Possible status values of a `TimeSeriesEntry`.&quot;&quot;&quot;</span>

        <span class="n">VALID</span> <span class="o">=</span> <span class="s2">&quot;valid&quot;</span>
        <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>

    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">Status</span> <span class="o">=</span> <span class="n">Status</span><span class="o">.</span><span class="n">VALID</span>
    <span class="n">broken_component_ids</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">set</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_error</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Create a `TimeSeriesEntry` that contains an error.</span>

<span class="sd">        This can happen when the value would be NaN, e.g.</span>
<span class="sd">        TimeSeriesEntry(value=1 / 0)</span>

<span class="sd">        Args:</span>
<span class="sd">            timestamp: Timestamp</span>

<span class="sd">        Returns:</span>
<span class="sd">            A single observed value (of arbitrary type) at a specific timestamp.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="p">(</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">ERROR</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">create_unknown</span><span class="p">(</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">broken_component_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Create a `TimeSeriesEntry` that contains an unknown value.</span>

<span class="sd">        This can happen when the value cannot be determined, because a component is</span>
<span class="sd">            broken.</span>

<span class="sd">        Args:</span>
<span class="sd">            timestamp: Timestamp</span>
<span class="sd">            broken_component_ids: broken component ids</span>

<span class="sd">        Returns:</span>
<span class="sd">            A single observed value (of arbitrary type) at a specific timestamp.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="p">(</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">,</span>
            <span class="n">broken_component_ids</span><span class="o">=</span><span class="n">broken_component_ids</span> <span class="ow">or</span> <span class="nb">set</span><span class="p">(),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">






<h5 id="frequenz.sdk.data_handling.time_series.TimeSeriesEntry-classes">Classes<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry-classes" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-class">



<h6 id="frequenz.sdk.data_handling.time_series.TimeSeriesEntry.Status" class="doc doc-heading">
        <code>Status</code>


<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.Status" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/enum.html#module-enum">enum</a>.<a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>

  
      <p>Possible status values of a <code>TimeSeriesEntry</code>.</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possible status values of a `TimeSeriesEntry`.&quot;&quot;&quot;</span>

    <span class="n">VALID</span> <span class="o">=</span> <span class="s2">&quot;valid&quot;</span>
    <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
    <span class="n">ERROR</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>
<h5 id="frequenz.sdk.data_handling.time_series.TimeSeriesEntry-functions">Functions<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_error" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_error</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_error" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Create a <code>TimeSeriesEntry</code> that contains an error.</p>
<p>This can happen when the value would be NaN, e.g.
TimeSeriesEntry(value=1 / 0)</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>timestamp</code></td>
          <td class="doc-param-details">
            <p>Timestamp</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.datetime" href="https://docs.python.org/3/library/datetime.html#datetime.datetime">datetime</a></code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>A single observed value (of arbitrary type) at a specific timestamp.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">create_error</span><span class="p">(</span><span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Create a `TimeSeriesEntry` that contains an error.</span>

<span class="sd">    This can happen when the value would be NaN, e.g.</span>
<span class="sd">    TimeSeriesEntry(value=1 / 0)</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp: Timestamp</span>

<span class="sd">    Returns:</span>
<span class="sd">        A single observed value (of arbitrary type) at a specific timestamp.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="p">(</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">ERROR</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_unknown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_unknown</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">broken_component_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry.create_unknown" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Create a <code>TimeSeriesEntry</code> that contains an unknown value.</p>
<p>This can happen when the value cannot be determined, because a component is
    broken.</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>timestamp</code></td>
          <td class="doc-param-details">
            <p>Timestamp</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.datetime" href="https://docs.python.org/3/library/datetime.html#datetime.datetime">datetime</a></code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>broken_component_ids</code></td>
          <td class="doc-param-details">
            <p>broken component ids</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Set" href="https://docs.python.org/3/library/typing.html#typing.Set">Set</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>A single observed value (of arbitrary type) at a specific timestamp.</p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">create_unknown</span><span class="p">(</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">broken_component_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Create a `TimeSeriesEntry` that contains an unknown value.</span>

<span class="sd">    This can happen when the value cannot be determined, because a component is</span>
<span class="sd">        broken.</span>

<span class="sd">    Args:</span>
<span class="sd">        timestamp: Timestamp</span>
<span class="sd">        broken_component_ids: broken component ids</span>

<span class="sd">    Returns:</span>
<span class="sd">        A single observed value (of arbitrary type) at a specific timestamp.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="p">(</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">UNKNOWN</span><span class="p">,</span>
        <span class="n">broken_component_ids</span><span class="o">=</span><span class="n">broken_component_ids</span> <span class="ow">or</span> <span class="nb">set</span><span class="p">(),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="frequenz.sdk.data_handling.time_series.TimeSeriesFormula" class="doc doc-heading">
        <code>frequenz.sdk.data_handling.time_series.TimeSeriesFormula</code>


<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.formula.Formula" href="../formula/#frequenz.sdk.data_handling.formula.Formula">Formula</a></code>, <code><a class="autorefs autorefs-external" title="typing.Generic" href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code></p>

  
      <p>Combines values from multiple time series via a specified algebraic formula.</p>
<p>Formulas are handled using the <code>sympy</code> library for symbolic mathematics.  It is
expected that each individual time series will have the same underlying type of
<code>Value</code>, and that this <code>Value</code> supports all the operations the formula requires
(for example, if the formula is <code>x / 7</code> and <code>Value</code> does not support division,
then the formula cannot be applied).</p>


        <details class="quote">
          <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TimeSeriesFormula</span><span class="p">(</span><span class="n">Formula</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">Value</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Combines values from multiple time series via a specified algebraic formula.</span>

<span class="sd">    Formulas are handled using the `sympy` library for symbolic mathematics.  It is</span>
<span class="sd">    expected that each individual time series will have the same underlying type of</span>
<span class="sd">    `Value`, and that this `Value` supports all the operations the formula requires</span>
<span class="sd">    (for example, if the formula is `x / 7` and `Value` does not support division,</span>
<span class="sd">    then the formula cannot be applied).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_is_component_broken</span><span class="p">(</span>
        <span class="n">cache_lookup_result</span><span class="p">:</span> <span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check if a component is broken.</span>

<span class="sd">        Args:</span>
<span class="sd">            cache_lookup_result: an enum saying if data from component with</span>
<span class="sd">                `component_id` was found in the cache or not</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if component is broken  and `False` otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">cache_lookup_result</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">MISS</span><span class="p">,</span>
            <span class="n">CacheEntryLookupResult</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">EXPIRED</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># pylint:disable=too-many-arguments</span>
    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cache</span><span class="p">:</span> <span class="n">LatestEntryCache</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
        <span class="n">formula_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">symbol_to_symbol_mapping</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SymbolMapping</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">timedelta_tolerance</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
        <span class="n">default_entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Evaluate the formula using time-series values from the provided cache.</span>

<span class="sd">        The underlying assumption of the evaluation process is that measurements from</span>
<span class="sd">        each time series will be offset slightly in time, but may still be combined if</span>
<span class="sd">        that offset is small enough.  By default the permitted offset is the maximum</span>
<span class="sd">        possible `timedelta`, in which case the mere existence of a value in each time</span>
<span class="sd">        series will be enough.</span>

<span class="sd">        This is probably not desirable for real-world use case so users should take care</span>
<span class="sd">        to always set the `timedelta_tolerance` parameter to a value that matches their</span>
<span class="sd">        use-case (for example, if the rate of update of time series is 0.2 sec, a</span>
<span class="sd">        `timedelta_tolerance` of 0.2 sec is recommended).</span>

<span class="sd">        Args:</span>
<span class="sd">            cache: cache of the most recent time series values, where the key should</span>
<span class="sd">                match the variable name in the formula (so e.g. if the formula is `x +</span>
<span class="sd">                y` then the cache should contain keys `&quot;x&quot;` and `&quot;y&quot;`)</span>
<span class="sd">            formula_name: user-defined name for the formula</span>
<span class="sd">            symbol_to_symbol_mapping: mapping of symbols in string representation to</span>
<span class="sd">                symbol mappings</span>
<span class="sd">            timedelta_tolerance: maximum permitted time difference between</span>
<span class="sd">                `cache.latest_timestamp` and the timestamp of any cached entry (if this</span>
<span class="sd">                is violated, the result will be the same as if an entry for the given</span>
<span class="sd">                key does not exist)</span>
<span class="sd">            default_entry: what entry to use if the entry for a given symbol is not</span>
<span class="sd">                found in the cache, or if the cached entry is not within the limits of</span>
<span class="sd">                `timedelta_tolerance`. If None, then formula won&#39;t be evaluated and None</span>
<span class="sd">                will be returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Result of the formula, with a `timestamp` equal to the highest timestamp</span>
<span class="sd">                among all of the combined time series entries, and a `value` that equals</span>
<span class="sd">                the formula result, or `None` if any of the required time series</span>
<span class="sd">                variables are not present in `cache` or are older than</span>
<span class="sd">                `timedelta_tolerance`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="n">symbol_to_symbol_mapping</span> <span class="o">=</span> <span class="n">symbol_to_symbol_mapping</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">formula_broken_component_ids</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">broken_meter_found</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_symbols</span><span class="p">:</span>
            <span class="n">symbol_mapping</span> <span class="o">=</span> <span class="n">symbol_to_symbol_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>

            <span class="n">cache_lookup_result</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">symbol</span><span class="p">,</span> <span class="n">timedelta_tolerance</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default_entry</span>
            <span class="p">)</span>

            <span class="c1"># If the value wasn&#39;t found in the cache and no symbol mapping was provided</span>
            <span class="c1"># for this symbol (meaning it cannot be determined what component category</span>
            <span class="c1"># it refers to), then return `default_entry` if it was provided, otherwise</span>
            <span class="c1"># the formula  cannot be evaluated and `None` will be returned</span>
            <span class="c1"># if cache_lookup_result.entry is None:</span>
            <span class="c1">#     return default_entry if default_entry is not None else None</span>

            <span class="c1"># Symbol metadata is not available, e.g. component category</span>
            <span class="k">if</span> <span class="n">symbol_mapping</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

                <span class="c1"># Component data is available and up to date</span>
                <span class="k">if</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">value</span>
                    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

                <span class="c1"># Otherwise, apply the default entry if it was provided, and if it</span>
                <span class="c1"># wasn&#39;t return `None` as the formula result as it cannot be evaluated</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">default_entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">None</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">value</span>
                    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

            <span class="c1"># Symbol metadata is available,  e.g. component category</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># When a component is broken, keep collecting ids of broken components</span>
                <span class="c1"># that this formula relies on, and if there&#39;s any meter among these,</span>
                <span class="c1"># return `UNKNOWN` as the formula result, otherwise fill in the values</span>
                <span class="c1"># of broken components with the `default_entry` and evaluate the formula</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_component_broken</span><span class="p">(</span><span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">status</span><span class="p">):</span>
                    <span class="n">formula_broken_component_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">symbol_mapping</span><span class="o">.</span><span class="n">component_id</span><span class="p">)</span>

                    <span class="c1"># If a meter is broken the formula cannot be evaluated</span>
                    <span class="k">if</span> <span class="n">symbol_mapping</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">SymbolComponentCategory</span><span class="o">.</span><span class="n">METER</span><span class="p">:</span>
                        <span class="n">broken_meter_found</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">continue</span>

                    <span class="c1"># For component categories different than meter, apply the</span>
                    <span class="c1"># default entry</span>
                    <span class="k">if</span> <span class="n">default_entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="kc">None</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">value</span>
                    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

                <span class="c1"># Component data is available and up to date</span>
                <span class="k">if</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">value</span>
                    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">broken_meter_found</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">create_unknown</span><span class="p">(</span>
                <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
                <span class="n">broken_component_ids</span><span class="o">=</span><span class="n">formula_broken_component_ids</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># pylint:disable=broad-except</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                <span class="s1">&#39;Formula &quot;</span><span class="si">%s</span><span class="s1">&quot; raised an unexpected Exception&#39;</span><span class="p">,</span> <span class="n">formula_name</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">create_error</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<h5 id="frequenz.sdk.data_handling.time_series.TimeSeriesFormula-functions">Functions<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula-functions" class="headerlink" title="Permanent link">¤</a></h5>

<div class="doc doc-object doc-function">



<h6 id="frequenz.sdk.data_handling.time_series.TimeSeriesFormula.evaluate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evaluate</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span> <span class="n">formula_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">symbol_to_symbol_mapping</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timedelta_tolerance</span><span class="o">=</span><span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="n">default_entry</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#frequenz.sdk.data_handling.time_series.TimeSeriesFormula.evaluate" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
  
      <p>Evaluate the formula using time-series values from the provided cache.</p>
<p>The underlying assumption of the evaluation process is that measurements from
each time series will be offset slightly in time, but may still be combined if
that offset is small enough.  By default the permitted offset is the maximum
possible <code>timedelta</code>, in which case the mere existence of a value in each time
series will be enough.</p>
<p>This is probably not desirable for real-world use case so users should take care
to always set the <code>timedelta_tolerance</code> parameter to a value that matches their
use-case (for example, if the rate of update of time series is 0.2 sec, a
<code>timedelta_tolerance</code> of 0.2 sec is recommended).</p>

  <table>
    <thead>
      <tr>
        <th><b>PARAMETER</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>cache</code></td>
          <td class="doc-param-details">
            <p>cache of the most recent time series values, where the key should
match the variable name in the formula (so e.g. if the formula is <code>x +
y</code> then the cache should contain keys <code>"x"</code> and <code>"y"</code>)</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.LatestEntryCache" href="#frequenz.sdk.data_handling.time_series.LatestEntryCache">LatestEntryCache</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>formula_name</code></td>
          <td class="doc-param-details">
            <p>user-defined name for the formula</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>&#39;&#39;</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>symbol_to_symbol_mapping</code></td>
          <td class="doc-param-details">
            <p>mapping of symbols in string representation to
symbol mappings</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.SymbolMapping" href="#frequenz.sdk.data_handling.time_series.SymbolMapping">SymbolMapping</a>]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>timedelta_tolerance</code></td>
          <td class="doc-param-details">
            <p>maximum permitted time difference between
<code>cache.latest_timestamp</code> and the timestamp of any cached entry (if this
is violated, the result will be the same as if an entry for the given
key does not exist)</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="datetime.timedelta" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta">timedelta</a></code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>timedelta.max</code>
                </span>
            </p>
          </td>
        </tr>
        <tr>
          <td><code>default_entry</code></td>
          <td class="doc-param-details">
            <p>what entry to use if the entry for a given symbol is not
found in the cache, or if the cached entry is not within the limits of
<code>timedelta_tolerance</code>. If None, then formula won't be evaluated and None
will be returned.</p>
            <p>
                <span class="doc-param-annotation">
                  <b>TYPE:</b>
                    <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]]</code>
                </span>
                <span class="doc-param-default">
                  <b>DEFAULT:</b> 
                    <code>None</code>
                </span>
            </p>
          </td>
        </tr>
    </tbody>
  </table>

  <table>
    <thead>
      <tr>
        <th><b>RETURNS</b></th>
        <th><b>DESCRIPTION</b></th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
              <span class="doc-returns-annotation">
                  <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="frequenz.sdk.data_handling.time_series.TimeSeriesEntry" href="#frequenz.sdk.data_handling.time_series.TimeSeriesEntry">TimeSeriesEntry</a>[<span title="frequenz.sdk.data_handling.time_series.Value">Value</span>]]</code>
              </span>
          </td>
          <td class="doc-returns-details">
            <p>Result of the formula, with a <code>timestamp</code> equal to the highest timestamp
among all of the combined time series entries, and a <code>value</code> that equals
the formula result, or <code>None</code> if any of the required time series
variables are not present in <code>cache</code> or are older than
<code>timedelta_tolerance</code></p>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>frequenz/sdk/data_handling/time_series.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">cache</span><span class="p">:</span> <span class="n">LatestEntryCache</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Value</span><span class="p">],</span>
    <span class="n">formula_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">symbol_to_symbol_mapping</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">SymbolMapping</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">timedelta_tolerance</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
    <span class="n">default_entry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TimeSeriesEntry</span><span class="p">[</span><span class="n">Value</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Evaluate the formula using time-series values from the provided cache.</span>

<span class="sd">    The underlying assumption of the evaluation process is that measurements from</span>
<span class="sd">    each time series will be offset slightly in time, but may still be combined if</span>
<span class="sd">    that offset is small enough.  By default the permitted offset is the maximum</span>
<span class="sd">    possible `timedelta`, in which case the mere existence of a value in each time</span>
<span class="sd">    series will be enough.</span>

<span class="sd">    This is probably not desirable for real-world use case so users should take care</span>
<span class="sd">    to always set the `timedelta_tolerance` parameter to a value that matches their</span>
<span class="sd">    use-case (for example, if the rate of update of time series is 0.2 sec, a</span>
<span class="sd">    `timedelta_tolerance` of 0.2 sec is recommended).</span>

<span class="sd">    Args:</span>
<span class="sd">        cache: cache of the most recent time series values, where the key should</span>
<span class="sd">            match the variable name in the formula (so e.g. if the formula is `x +</span>
<span class="sd">            y` then the cache should contain keys `&quot;x&quot;` and `&quot;y&quot;`)</span>
<span class="sd">        formula_name: user-defined name for the formula</span>
<span class="sd">        symbol_to_symbol_mapping: mapping of symbols in string representation to</span>
<span class="sd">            symbol mappings</span>
<span class="sd">        timedelta_tolerance: maximum permitted time difference between</span>
<span class="sd">            `cache.latest_timestamp` and the timestamp of any cached entry (if this</span>
<span class="sd">            is violated, the result will be the same as if an entry for the given</span>
<span class="sd">            key does not exist)</span>
<span class="sd">        default_entry: what entry to use if the entry for a given symbol is not</span>
<span class="sd">            found in the cache, or if the cached entry is not within the limits of</span>
<span class="sd">            `timedelta_tolerance`. If None, then formula won&#39;t be evaluated and None</span>
<span class="sd">            will be returned.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Result of the formula, with a `timestamp` equal to the highest timestamp</span>
<span class="sd">            among all of the combined time series entries, and a `value` that equals</span>
<span class="sd">            the formula result, or `None` if any of the required time series</span>
<span class="sd">            variables are not present in `cache` or are older than</span>
<span class="sd">            `timedelta_tolerance`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Value</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

    <span class="n">symbol_to_symbol_mapping</span> <span class="o">=</span> <span class="n">symbol_to_symbol_mapping</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="n">formula_broken_component_ids</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">broken_meter_found</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_symbols</span><span class="p">:</span>
        <span class="n">symbol_mapping</span> <span class="o">=</span> <span class="n">symbol_to_symbol_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>

        <span class="n">cache_lookup_result</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">symbol</span><span class="p">,</span> <span class="n">timedelta_tolerance</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default_entry</span>
        <span class="p">)</span>

        <span class="c1"># If the value wasn&#39;t found in the cache and no symbol mapping was provided</span>
        <span class="c1"># for this symbol (meaning it cannot be determined what component category</span>
        <span class="c1"># it refers to), then return `default_entry` if it was provided, otherwise</span>
        <span class="c1"># the formula  cannot be evaluated and `None` will be returned</span>
        <span class="c1"># if cache_lookup_result.entry is None:</span>
        <span class="c1">#     return default_entry if default_entry is not None else None</span>

        <span class="c1"># Symbol metadata is not available, e.g. component category</span>
        <span class="k">if</span> <span class="n">symbol_mapping</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="c1"># Component data is available and up to date</span>
            <span class="k">if</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">value</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

            <span class="c1"># Otherwise, apply the default entry if it was provided, and if it</span>
            <span class="c1"># wasn&#39;t return `None` as the formula result as it cannot be evaluated</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">default_entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">value</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

        <span class="c1"># Symbol metadata is available,  e.g. component category</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># When a component is broken, keep collecting ids of broken components</span>
            <span class="c1"># that this formula relies on, and if there&#39;s any meter among these,</span>
            <span class="c1"># return `UNKNOWN` as the formula result, otherwise fill in the values</span>
            <span class="c1"># of broken components with the `default_entry` and evaluate the formula</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_component_broken</span><span class="p">(</span><span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">status</span><span class="p">):</span>
                <span class="n">formula_broken_component_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">symbol_mapping</span><span class="o">.</span><span class="n">component_id</span><span class="p">)</span>

                <span class="c1"># If a meter is broken the formula cannot be evaluated</span>
                <span class="k">if</span> <span class="n">symbol_mapping</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="n">SymbolComponentCategory</span><span class="o">.</span><span class="n">METER</span><span class="p">:</span>
                    <span class="n">broken_meter_found</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">continue</span>

                <span class="c1"># For component categories different than meter, apply the</span>
                <span class="c1"># default entry</span>
                <span class="k">if</span> <span class="n">default_entry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">value</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">default_entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

            <span class="c1"># Component data is available and up to date</span>
            <span class="k">if</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">value</span>
                <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">cache_lookup_result</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">broken_meter_found</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">create_unknown</span><span class="p">(</span>
            <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
            <span class="n">broken_component_ids</span><span class="o">=</span><span class="n">formula_broken_component_ids</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># pylint:disable=broad-except</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
            <span class="s1">&#39;Formula &quot;</span><span class="si">%s</span><span class="s1">&quot; raised an unexpected Exception&#39;</span><span class="p">,</span> <span class="n">formula_name</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">TimeSeriesEntry</span><span class="o">.</span><span class="n">create_error</span><span class="p">(</span><span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../power/" class="md-footer__link md-footer__link--prev" aria-label="Previous: power" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              power
            </div>
          </div>
        </a>
      
      
        
        <a href="../../data_ingestion/" class="md-footer__link md-footer__link--next" aria-label="Next: data_ingestion" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              data_ingestion
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Frequenz Energy-as-a-Service GmbH
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/frequenz-floss" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/company/frequenz-com" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../../../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>